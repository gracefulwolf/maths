!function(){if(window.require){window.$$_module={core:{},api:{},api2:{}};var e=window.require("path");window.__dirname=e.resolve("./").replace(/\\/gim,"/"),function(e){function n(e,n){function t(e){console.log("# 파일 선택 취소"),r()}function i(e){var n=o.files[0];console.log("# 파일 경로 선택 : ",n),r(n)}function r(e){n&&n(e),o.removeEventListener("change",i),o.removeEventListener("cancel",t),o=null}if(!o){o=window.document.createElement("input");var a=window.document.createAttribute("type");a.value="file",o.attributes.setNamedItem(a);var l=window.document.createAttribute("nwsaveas");l.value=e,o.attributes.setNamedItem(l),o.addEventListener("click",function(e){e.stopPropagation(),o.addEventListener("change",i),o.addEventListener("cancel",t)})}setTimeout(function(){o.click()})}e.api.dialogbox={saveas:n};var o}(window.$$_module),function(e){function n(e){return 0==e.indexOf(".")?alert("상대경로는 사용할수 없습니다."):(e=e.replace(/^user:(\/|\\)/gim,""),e=e.replace(/^\/+/gim,""),e=e.replace(/^\\+/gim,""),e=jj._path.toURL("user://"+e),jj._path.toAbsolutePath(e))}function o(e,o){var t,i;if("function"==typeof arguments[2]?(t={encoding:"utf8"},i=arguments[2]):(t=arguments[2]||{},i=arguments[3]),!(e=n(e)))return void(i&&i.apply(null,["경로가 전달되지 않았습니다."]));console.log("* 파일 쓰기 : ",e),a.outputFile(e,o,t,function(e){e&&console.error("[파일 쓰기 에러] ",e),i&&i.apply(null,arguments)})}function t(e){var o,t;if("function"==typeof arguments[1]?(o={encoding:"utf8"},t=arguments[1]):(o=arguments[1]||{},t=arguments[2]),!(e=n(e)))return void(t&&t.apply(null,["경로가 전달되지 않았습니다."]));console.log("* 파일 읽기 : ",e),a.readFile(e,o,function(e,n){e&&console.error("[파일 읽기 에러] ",e),t&&t.apply(null,arguments)})}function i(e,o,t){if(o=n(o),!e||!o)return void(t&&t.apply(null,["경로가 전달되지 않았습니다."]));console.debug("# 파일 복사 위치 : ",o),a.copy(e,o,{clobber:!0},function(e){e&&console.error("[파일 복사 에러] ",e),t&&t.apply(null,arguments)})}function r(e,o){if(!e)return void(o&&o.apply(null,["경로가 전달되지 않았습니다."]));e=n(e),console.debug("# 파일 삭제 위치 : ",e),a.remove(e,function(e){e&&console.error("[파일 삭제 에러] ",e),o&&o.apply(null,arguments)})}e.api.io={write:o,read:t,copy:i,remove:r};var a=require("fs-extra")}(window.$$_module),function(e){function n(e,n,r){if(e=window.jj._path.toURL(e),console.warn("* link : (",n,")",e),e){if(!(n||e.indexOf("http://")<0&&e.indexOf("https://")<0))return void window.nw.Shell.openExternal(e);if("string"==typeof r&&(r=JSON.parse(r)),r=r||{},"_self"===n||"_top"===n){if(o(e,r,n))return}var a="_blank"===n?void 0:n;if(a){if(i(e,a,r))return}t(e,r,a)}}function o(e,n,o){return window.jj.getRootWindow().jj._root.link_iframe(window,e,n,o)}function t(e,n,o){var t=window;return window.jj.getRootWindow().jj._root.link_blank(t,e,n,o)}function i(e,n,t){var i=window.jj.getWindows(n);if(!i)return!!window.jj._global._readyCallLinkWindowIDs[n]||(window.jj._global._readyCallLinkWindowIDs[n]=e,!1);var r=i.frameID;if(r==window.jj._frame_id){if(o(e,t,"_top"))return!0}var a=i.window,l=window.jj.getRootWindow(r),s=l.jj._root.link_iframe(a,e,t,"_top");return s||(window.jj._global._readyCallLinkWindowIDs[n],!0)}function r(e,o,t,i){var r=window.jj._global,a=(require("path"),e.split("?")),l=a[0];if(l=jj._path.toURL(l)){l.lastIndexOf("/")!=l.length-1&&(l+="/");var s=a[1]?"&"+a[1]:"";s="contentInformationURL="+l+s;var d=t||{};for(var c in d)s+="&"+c+"="+d[c];var w=jj._path.toURL(i)||r.path.viewer.ebook,u=w+"?"+encodeURIComponent(s);console.log("* ebook : ",u),o=o||"_blank",n(u,o,t)}}function a(e,o,t,i){console.log("* image : ",e);var r=window.jj._global,a=jj._path.toURL(i)||r.path.viewer.image;e=window.jj._path.toURL(e),e=encodeURIComponent(e),t=t||{},void 0===t.width&&(t.width=700),void 0===t.height&&(t.height=500);var l=a+"?content_url="+e;o=o||"_blank",n(l,o,t)}function l(e,o,t,i){console.log("* pdf : ",e);var r=window.jj._global,a=jj._path.toURL(i)||r.path.viewer.pdf;e=window.jj._path.toURL(e),e=encodeURIComponent(e),o=o||"_blank",n(a+"?content_url="+e,o,t)}function s(e,o,t,i){console.log("* audio : ",e);var r=window.jj._global,a=jj._path.toURL(i)||r.path.viewer.audio;e=window.jj._path.toURL(e),e=encodeURIComponent(e),t=t||{},void 0===t.width&&(t.width=500),void 0===t.height&&(t.height=54),o=o||"_blank",n(a+"?content_url="+e,o,t)}function d(e,o,t,i){console.log("* video : ",e);var r=window.jj._global,a=jj._path.toURL(i)||r.path.viewer.video;e=window.jj._path.toURL(e),e=encodeURIComponent(e),t=t||{},void 0===t.width&&(t.width=700),void 0===t.height&&(t.height=500),o=o||"_blank",n(a+"?content_url="+e,o,t)}function c(e,o,t,i){console.log("* flash : ",e);var r=window.jj._global,a=jj._path.toURL(i)||r.path.viewer.flash;e=window.jj._path.toURL(e),e=encodeURIComponent(e),o=o||"_blank",n(a+"?content_url="+e,o,t)}e.api.linker={html:n,ebook:r,image:a,pdf:l,audio:s,video:d,flash:c}}(window.$$_module),function(e){function n(e,n){void 0==a[e]&&(a[e]=[]),a[e].push(n)}function o(e,n){if(void 0!=a[e]){var o=a[e],t=o.length-1;if(!(t<0))for(var i=t;i>=0;--i)o[i].toString()==n.toString()&&o.splice(i,1)}}function t(e){void 0!=a[e]&&delete a[e]}function i(e,n){if(window&&window.jj)try{var o=a[e];if(o){console.log("* _callHandler 호출 (",window.jj._id,":",e,") : ",n);for(var t=o.length,i=0;i<t;++i){var r=o[i];if(r&&(console.debug("\t* arguments : ",n),console.debug("\t* fn : ",r.toString()),r.apply(window,n)))return!0}}}catch(n){var l='["'+e+'" 이벤트 핸들러에서 스크립트 오류]\n\n'+(n.stack||n);console.error(l),alert(l)}}function r(e,n){if(console.log("* send message : ",n),!e||!e.jj)return void console.debug("# message를 전송할 수 없습니다.");e.jj.event._callHandler.apply(e,["message",[n,window]])}e.api.listener={addListener:n,removeListener:o,removeAllListeners:t,_callHandler:i,message:r,__getListener:function(){return a}};var a={}}(window.$$_module),function(e){function n(e){console.log("CLOSE : ",e),window.jj._closeData=e,window.nw.Window.get().close()}function o(){var e=window.jj.getRootWindow(),n=e.jj._isFullscreen;console.log("* Fullscreen : ",n," : ",window.jj._id);var o=window.nw.Window.get();n?o.restore():o.enterFullscreen()}function t(e){(e=window.jj._path.toAbsolutePath(e))&&(console.log("* explorer : ",e),window.nw.Shell.showItemInFolder(e))}function i(e){(e=window.jj._path.toAbsolutePath(e))&&(console.log("* exe : ",e),window.nw.Shell.openItem(e))}function r(e,n,o){e=window.jj._path.toAbsolutePath(e),l(e,n,o)}function a(e,n,o){e=s(e),l(e,n,o)}function l(e,n,o){o=o||{},console.log("* download : ",e);var t="string"!=typeof e,i=t?"download_zip.html":"download.html";i="root://js/ui/"+i;var r=o.path;r&&(i=jj._path.toURL(r)||i,delete o.path);var a={width:300,height:250,parameter:e,onClose:function(e){console.log("# 창닫힘 콜백 함수 (전달값) : ",e),void 0!==e&&e?e.error?(console.error(e.error),n&&n("error",e.error)):e.open?(window.jj.native.exe(e.open),n&&n("open",e.open)):e.save&&(console.log("다운로드 완료됨 : ",e.save),n&&n("save",e.save)):(console.log("- 취소"),n&&n("cancel"))}};for(var l in o)a[l]=o[l];window.jj.link.html(i,"_blank",a)}function s(e,n){e=e||{},n=n||function(){};var o=e.root,t=e.source,i=e.zip;return t?(t=Array.isArray(t)?t.map(function(e){return e=window.jj._path.toAbsolutePath(e),e=e.replace(/\\/gim,"/")}):window.jj._path.toAbsolutePath(t),o&&(o=window.jj._path.toAbsolutePath(o)),i&&(i=window.jj._path.toAbsolutePath(i)),e.root=o,e.source=t,e.zip=i,e):n("압축할 파일이 지정되지 않았습니다.")}function d(e,n){function o(){r=r.replace(/\\/gim,"/"),c({root:t,source:i,zip:r},n)}e=s(e);var t=e.root,i=e.source,r=e.zip;if(r)o();else{var a=window.$$_module.api.dialogbox,l=e.defaultName||"download.zip";a.saveas(l,function(e){return e&&e instanceof File?(r=e.path,void o()):n()})}}function c(e,n){function o(){var e=require("archiver"),o=e("zip",{zlib:{level:9}}),i=t.createWriteStream(l);i.on("close",function(){console.log(o.pointer()+" total bytes"),console.log("archiver has been finalized and the output file descriptor has closed."),n&&n(null,l)}),i.on("end",function(){console.log("Data has been drained")}),o.on("warning",function(e){console.warn("* archive warning : ",e)}),o.on("error",function(e){console.error("* archive error : ",e)}),o.pipe(i);try{var s=r||window.jj._global.path._resource;s=s.replace(/\\/gim,"/"),a=Array.isArray(a)?a:[a],a.forEach(function(e){if(e=e.replace(/\\/gim,"/"),!t.existsSync(e))return console.error("* Not found : ",e);var n=e.replace(s,"");console.log("* pathString : ",e),t.statSync(e).isDirectory()?o.directory(e,n||!1):o.file(e,{name:n})})}catch(e){console.error("========>",e)}o.finalize()}var t=require("fs-extra"),i=require("path");console.log("# zip config : ",e);var r=e.root,a=e.source,l=e.zip,s=i.parse(l);t.ensureDir(s.dir,function(e){if(e)return console.log("ensureDirSync : ",e);o()})}function w(e){function n(e,n,o){var t=new Image;t.src=e,t.onload=function(){void 0===n.x&&(n.x=0),void 0===n.y&&(n.y=0),void 0===n.width&&(n.width=t.width),void 0===n.height&&(n.height=t.height);var e=u(t,n);o(e)}}var o,t;"function"==typeof arguments[1]?t=arguments[1]:(o=arguments[1],t=arguments[2]);var i=require("path"),r=i.parse(e),a=r.ext.substring(1)||"png",l={format:a,datatype:"raw"};window.nw.Window.get().capturePage(function(i){if(i="data:image/"+a+";base64,"+i,!o)return void f(e,i,function(e){t&&t.apply(null,[e,i])});n(i,o,function(n){f(e,n,function(e){t&&t.apply(null,[e,n])})})},l)}function u(e,n){var o=document.createElement("canvas");return o.width=Math.floor(n.width),o.height=Math.floor(n.height),o.getContext("2d").drawImage(e,-Math.floor(n.x),-Math.floor(n.y)),o.toDataURL()}function f(e,n,o){var t=n.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/);if(3!==t.length)return new Error("Invalid input string");var i={};i.type=t[1],i.data=new Buffer(t[2],"base64");var r=i.data;window.jj.io.write(e,r,{encoding:"binary"},function(e){e&&console.error("[파일 쓰기 에러] ",e),o(e)})}e.api.native={close:n,toggleFullscreen:o,explorer:t,download:r,zipDownload:a,exe:i,zip:d,capturePage:w}}(window.$$_module),function(e){function n(e){if(!e)return e;var n=window;if(!n||!n.jj)return console.error("window를 사용할 수 없습니다.");var o=require("path"),i=n.jj._global,r=i.path.root,a=i.path.resource,l=i.path.user;if(e=e.trim(),0===e.search(/(\S(?!\?))+?:\//))return 0===e.search(/http(s)?:\/\//)?e:0===e.search(/root:\/\//)?e=e.replace(/root:\/\//,r):0===e.search(/resource:\/\//)?e=e.replace(/resource:\//,a):0===e.search(/user:\/\//)?e=e.replace(/user:\//,l):void alert("허용되지 않는 경로 표기 입니다.(toURL:허용안된 프로토콜 접근)\n"+e);if(0===e.search(/(\S(?!\?))+?:\\/)&&alert("허용되지 않는 경로 표기 입니다.(toURL:절대 경로로 접근)\n"+e),0===e.indexOf("/"))return e;var s=i.path._root;if(!s)return e;var d=t(),c=o.resolve(s,"."+d);return e=o.resolve(c,e),e=e.replace(/\\/gim,"/"),s&&"/"!==s&&0===e.indexOf(s)&&(e=e.replace(s,"")),e}function o(e){if(e=e.trim(),0===e.search(/(\S(?!\?))+?:\/\//))return void alert("지원되지 않는 프로토콜 형식입니다.\n * path - "+e);var n=require("path"),o=window.jj._global;if(0===e.search(/(\S(?!\?))+?:\\\\/)||0===e.search(/(\S(?!\?))+?:\\/))return e=e.replace(/\//gim,n.sep);if(0===e.indexOf("/"))return e=n.resolve(o.path._root,"."+e),e=e.replace(/\//gim,n.sep);var i=o.path._root;if(!i)return e;var r=t(),a=n.resolve(i,"."+r);return e=n.resolve(a,e)}function t(){var e=window.document.head.baseURI;e=e.split("?")[0];var n=require("path"),o=n.parse(e);return e=o.ext?o.dir:o.dir+"/"+o.base,e.search("/")!=e.length-1&&(e+="/"),e=e.replace(window.location.origin,"")}e.api.path={toURL:n,toAbsolutePath:o}}(window.$$_module),function(e){function n(){var e=window.jj._frame_id;window.jj._global.removeFrame(e)}function o(n,o,t){try{e.core.chain.run(n,o,t)}catch(e){console.error(e)}}function t(e,n,o,t){var a,l="_top"==t,d=e.jj._global,c=e.jj._frame_id;if(n==d.path.viewer.blank?o.parameter?(a=o.parameter.windowID,delete o.parameter.windowID):a=d._createID(c+"_container_"):a="root"==e._jj_type?d._createID(c+"_container_"):e.jj._id,l){if(!d.getContainerFrame(c))return!1}else{var w=d.getWindows(a);if(!w||!w.window)return!1}var u={focus:!0,fullscreen:e.jj._isFullscreen},f=s(o,u);o._custom=f,o._state={_isFullscreen:e.jj._isFullscreen,_focused:e.jj._focused,_frameID:c,_windowID:a};var p=d.getRootWindow(c);p.jj._root._temparyData_self={option:o},console.debug("# 페이지 이동 임시 데이터 저장 (",t,") : ",e._jj_type),"root"==e._jj_type&&console.log("\t- root window에서 container에 처음으로 로드하는 경우 windowID 새로 생성함"),console.log("\t- windowID : ",a),console.log("\t- url : ",n),console.log("\t- temp : ",p.jj._root._temparyData_self),console.log("\t- 이동 : ",c,"/",a," : ",n);var h;return l?(0!==n.indexOf("http://")&&0!==n.indexOf("https://")||(console.log("# 외부 링크 : ",n),n=d.path.viewer.web+"?content_url="+encodeURIComponent(n)),h=i(c,n)):h=r(a,n),h}function i(e,n){var o=window.jj._global.getContainerFrame(e);return!!o&&(0===n.indexOf("http")?o.setAttribute("nwfaketop",""):o.removeAttribute("nwfaketop"),o.src=n,0===n.indexOf("http")&&0!==n.indexOf(window.location.host)&&l(window),!0)}function r(e,n){var o=window.jj._global.getWindows(e);if(!o||!o.window)return!1;if(o.window&&o.window.parent&&o.window.parent!=o.window)return a(e,n).src=n,!0;return o.window.location.replace(n),0===n.indexOf("http")&&0!==n.indexOf(window.location.host)&&l(window),!0}function a(e,n){var o=window.jj._global.getIframeNode(e),t=0===n.indexOf("http://")||0===n.indexOf("https://"),i=o.cloneNode();return t?i.setAttribute("nwfaketop",""):i.removeAttribute("nwfaketop"),i.src="nw:Blank",o.parentElement.replaceChild(i,o),i}function l(e){var n=window.jj._root._temparyData_self;if(!n)return void o(e,null,"_self");var t=n.option._state,i=t._windowID;e.jj._id=i,e.jj._parentID=window.jj._parentID,e.jj._option=n.option,console.debug("# SELF창 적용값 전달 받음 (",e._jj_type,") : "),console.log("\t- # _id : ",e.jj._id),console.log("\t- # _parentID : ",e.jj._parentID),console.log("\t- # temp : ",n),o(e,n.option,"_self"),window.jj._root._temparyData_self=null}function s(e,n){var o={};if(e)for(var t in e)o[t]=e[t],u.indexOf(t)>-1?delete e[t]:f.indexOf(t)>-1&&(n[t]=e[t],delete e[t]);return o}function d(e,n,o,t){console.debug("# 새창 띄우기 : ",n);var i=e.jj._global,r=e.jj._id;t||console.log("\t- windowID (나중에) 새로 생성해야함 : ",n),console.log("\t- windowID : ",t),console.log("\t- option : ",o);var a={focus:!0,fullscreen:e.jj._isFullscreen,width:i.config.width,height:i.config.height,show:void 0===i.config.show||i.config.show,title:" "},l=s(o,a);o._custom=l,o._state={_openerWindowID:r,_windowID:t,_focused:!1,_isFullscreen:a.fullscreen},console.log("\t- defaultOption : ",a),i.getRootWindow(e.jj._frame_id).jj._root._temparyData_blank={option:o};var d;0===n.indexOf("http://")||0===n.indexOf("https://")?(n=encodeURIComponent(i.path.viewer.web+"?content_url="+encodeURIComponent(n)),d=i.path.viewer.window+"?url="+n):d=i.path.viewer.window+"?url="+n,console.log("# 페이지 호출 : ",d);var w=c(e,o);window.nw.Window.open(d,a,w)}function c(e,n){return function(e){if(!e)return void(console&&console.error("* 링크를 여는 중 오류가 발생했습니다.\n올바른 경로인지 확인하세요."))}}function w(){var e=window.opener.jj.getRootWindow(window.opener.jj._frame_id),n=e.jj._root._temparyData_blank;if(!n)return void o(window,null,"_blank");var t=n.option._state,i=t._windowID;window.jj._id=i,window.jj._parentID=t._openerWindowID,window.jj._option=n.option,console.debug("# 새창 적용값 전달 받음 (",window._jj_type,") : "),console.log("\t- # _parentID : ",window.jj._parentID),console.log("\t- # _id : ",window.jj._id),console.log("\t- # temp : ",n),i in window.jj._global._readyCallLinkWindowIDs&&delete window.jj._global._readyCallLinkWindowIDs[i],o(window,n.option,"_blank"),window.jj._root._temparyData_blank=null}e.api.root={link_blank:d,link_iframe:t,_temparyData_self:null,_temparyData_blank:null,onSelfPageChange:l,onRootPageChange:w,destroy:n},console.log("##############"),console.log("# JJ CONTAINER API"),console.log("##############");var u=["parameter","maximize","minimize","alwaysOnTop","fullscreen","onOpen","onClose"],f=["show","focus","width","height","title"]}(window.$$_module),function(e){function n(){}e.api2.BeatPattern=function(){return new n};var o=function(){};n.prototype={_currentPattern:void 0,_onSuccess:void 0,_onFail:void 0,setPattern:function(e,n,t){this._currentPattern=e,this._onSuccess=n,this._onFail=t,o(this.hasPattern?"패턴검사 가능":"패턴이 정의되지 않았습니다.")},hasPattern:function(){return this._currentPattern&&this._currentPattern.length>1},resetPattern:function(e,n){e=e||this.target,n=n||this._currentPattern,this.clear(),this.deletePattern(),this.createPattern(e),this.setPattern(n)},destroy:function(){this.clear(),this.deletePattern&&this.deletePattern(),this._currentPattern=null,this._onSuccess=null,this._onFail=null},target:void 0,deletePattern:void 0,createPattern:function(e){function n(){t.startGesture()}function o(){t.endGesture()}if(e){var t=this;this.deletePattern=function(){t.target&&(t._off(e,"mousedown",n),t._off(e,"mouseup",o),t.target=null)},this._on(e,"mousedown",n),this._on(e,"mouseup",o),this.target=e}},_on:function(e,n,o){e.addEventListener?e.addEventListener(n,o,!1):e.attachEvent?e.attachEvent("on"+n,o):e["on"+n]&&(e["on"+n]=o)},_off:function(e,n,o){e.removeEventListener?e.removeEventListener(n,o):e.detachEvent?e.detachEvent("on"+n,o):e["on"+n]&&(e["on"+n]=null)},MIN_SHORT:10,MAX_SHORT:220,MIN_LONG:220,MAX_LONG:900,MIN_VARY_LONG:900,MAX_VARY_LONG:2500,MAX_INTERVAL:2500,RETRY_INTERVAL:100,_sTime:0,_eTime:0,getTimer:function(){return(new Date).getTime()},startGesture:function(){this.clearNextInterval(),this._sTime=this.getTimer()},endGesture:function(){this._eTime=this.getTimer(),this.checkProgress()},getGestureDuration:function(){return this._eTime-this._sTime},_gestureIndex:-1,checkProgress:function(){if(!this.hasPattern)return void o("패턴이 정의되지 않았습니다.");this._gestureIndex<0&&o("패턴 비교 시작"),++this._gestureIndex;var e,n,t=this._currentPattern[this._gestureIndex];switch(t){case 0:e=this.MIN_SHORT,n=this.MAX_SHORT;break;case 1:e=this.MIN_LONG,n=this.MAX_LONG;break;case 2:e=this.MIN_VARY_LONG,n=this.MAX_VARY_LONG}var i=this.getGestureDuration();return o("delay : ",i),e>i||n<i?void this.patternFailed():this._gestureIndex==this._currentPattern.length-1?void this.patternComplete():void this.nextPattern()},patternComplete:function(){this.clear(),this.dispatchEvent("success"),o("성공")},patternFailed:function(){this.clear(),this.dispatchEvent("fail"),this.setRetryInterval(),o("실패")},dispatchEvent:function(e){"success"==e?this._onSuccess():"fail"==e&&this._onFail()},clear:function(){this.clearNextInterval(),this._gestureIndex=-1,this._sTime=this._eTime=-1},nextPattern:function(){this.setNextInterval()},_nextIntervalID:-1,setNextInterval:function(){function e(){n.clearNextInterval(),n.patternFailed()}var n=this;this.clearNextInterval(),this._nextIntervalID=setInterval(e,this.MAX_INTERVAL)},clearNextInterval:function(){-1!=this._nextIntervalID&&clearInterval(this._nextIntervalID),this._nextIntervalID=-1},_retryIntervalID:-1,setRetryInterval:function(){function e(){n.clearRetryInterval(),n.createPattern(t),o("재검사 대기")}var n=this,t=this.target;this.clearRetryInterval(),this._retryIntervalID=setInterval(e,this.RETRY_INTERVAL),this.deletePattern()},clearRetryInterval:function(){this._retryIntervalID&&clearInterval(this._retryIntervalID),this._retryIntervalID=-1}}}(window.$$_module),function(e){function n(){}var o;e.api2.recorder={stop:function(){o||(o=new n),o.stop.apply(o,arguments)},start:function(){o||(o=new n),o.start.apply(o,arguments)},isRunning:function(){return o||(o=new n),o.isRunning}};var t=require("child_process"),i=__dirname+"/js/record/MainRec.exe";n.prototype={isRunning:!1,stop:function(){this.isRunning=!1,console.log("* 녹음 중지"),this._exec(i,[]),console.warn("# 필요없는 녹음 파일은 삭제해 주어야 합니다.")},start:function(e,n,o){this.isRunning=!0;var t=(new Date).getTime()+".mp3",r=window.jj._global.path.tempFolder+"/record/"+t;r=r.replace(/\\/g,"/");var a=600;o&&((isNaN(o.time)||o.time<1)&&(a=o.time),o.path&&(r=o.path));var l=["/rec",a,r];console.log("* 녹음 시작 : ",l),this._exec(i,l,e,n)},_exec:function(e,n,o,i){var r=this;t.execFile(e,n,function(e,n,t){return r.isRunning=!1,e&&(console.error("[error] : "+e),i&&i(e)),n?(console.log("[stdout] : "+n),void(o&&o(n))):t?(console.debug("[stderr] : ",t),void(o&&o(t))):void 0}).on("exit",function(e){console.log("Child process exited with exit code "+e)})}}}(window.$$_module),function(e){function n(e,n,o){this._swfURL=e,this._swfVersionStr="11.1.0",this._xiSwfUrlStr="/viewer/flash/playerProductInstall.swf",this._flashContainerID="flashContent",this._flashID="flashApplication",this._swf=null,this.callJSContext=o,this.bgcolor="#FFFFFF",this.flashWidth="100%",this.flashHeight="100%",this.wmode="opaque",this.scale="showAll",this.quality="high",this.menu=!1,this.initialize(n)}function o(e){this.interfaceFunctionName=e}e.api2.swf=function(e){return new o(e)},n.prototype={initialize:function(e){for(var n in e)n in this&&(this[n]=e[n])},createSWF:function(n){"object"!=typeof(n=n||{})&&alert("플래시에 전달할 값은 key:value 형식에 객체여야 합니다.\nvalue 값에는 복합데이터는 전달되지 않습니다.\n\n- 현재 전달된 값 : "+n);var o={};o.quality=this.quality,o.bgcolor=this.bgcolor,o.allowscriptaccess="always",o.allowfullscreen="true",o.wmode=this.wmode,o.swLiveConnect="true",o.scale=this.scale,o.quality=this.quality,o.menu=this.menu;var t={};t.id=this._flashID,t.name=this._flashID,t.align="middle";var i=(new Date).getTime(),r=this._swfURL+"?time="+i,a=e.api2.swfobject();a.embedSWF(r,this._flashContainerID,this.flashWidth,this.flashHeight,this._swfVersionStr,this._xiSwfUrlStr,n,o,t),a.createCSS("#"+this._flashID,"display:block;text-align:left;")},getSWF:function(){if(!this._swf){var e=-1!=navigator.appName.indexOf("Microsoft");this._swf=e?window.document.all[this._flashID]:window.document[this._flashID]}if(!this._swf){var n=this._flashID+" : SWF 객체에 아직 접근할 수 없습니다.";console.error(n,"Error",!0)}return this._swf},swfInterface:function(e){this._callJSMethodName=e,this.setGlobalMethod(this._callJSMethodName,this.callJSContext)},_swfLoaded:!1,_lazyCallback:void 0,_onLoadComplate:function(e){if(this._swfLoaded)return void(e&&e());this._lazyCallback=e},setGlobalMethod:function(e,n){if(!e)return console.log("* 통신을 위한 Global 메서드 네임이 지정되지 않았습니다."),void console.log("* ExternalInterface.call에서 일괄적으로 사용되는 이름을 지정하십시오.");var o=this;window[e]=function(e){if(void 0===e)return o._swfLoaded=!0,void(o._lazyCallback&&(o._lazyCallback(),o._lazyCallback=null));o.toJS(e,n)},console.log("* Global 변수 "+e+"이 정의 되었습니다.\n* "+e+"를 이용하여 SWF로부터 함수 호출을 전달 받습니다. (",this._flashID,")")},toJS:function(e,n){var o=e.apiName,t=e.params;if(t&&!Array.isArray(t))return void alert("JS 호출 매개변수를 배열로 전달해야 합니다.");console.log("[JS의 다음 함수를 호출 : ]"),console.log("\t *function : ",o),console.log("\t *param : ",t),n=window;var i=n,r=o.split(".");for("window"==r[0]&&r.shift();i&&r.length>0;){var a=r.shift();n=i,i=i[a]}if(i&&"function"==typeof i)return i.apply(n,t);var l="* 정의되지 않은 js 메서드를 호출함 : "+o;return alert(l),null},toSWF:function(e,n){if(e){var o=this.getSWF();if(!o){return void alert("SWF 객체를 찾을 수 없어 콜백 함수를 호출할 수 없습니다.")}return this._swfLoaded?(console.log("[swf의 다음 함수를 호출 : ]"),console.log("\t *function : ",e),console.log("\t *param : ",n),e in o?o[e](n):"error"):void alert("SWF 객체와 통신이 설정되지 않았습니다.")}}};var t=require("path");o.prototype={security:function(){if(0===window.location.protocol.indexOf("http"))return void console.log("* [Flash] web 실행시 보안설정을 하지 않습니다.");var e=require("nw-flash-trust");if(!e)return console.error("* 전역 보안설정을 할 수 없습니다.");if(!window.nw)return console.error("* manifest 파일 정보를 알수 없습니다.");var n=window.jj._global.manifest.name,o=window.nw.App.dataPath+"\\Pepper Data\\Shockwave Flash\\WritableRoot\\",t=window.location.origin+window.jj._global.path.resource;try{var i=e.initSync(n,o);i.isTrusted(t)||i.add(t)}catch(e){console.error("Flash Trust : ",e)}},_baseURI:function(e){var n=window.jj._path.toURL(e),o=t.parse(n).dir+"/";if(window.document.head){var i=window.document.getElementsByTagName("base")[0];if(i)i.setAttribute("href",o);else{i=window.document.createElement("base");var r=window.document.createAttribute("href");r.value=o,i.setAttributeNode(r)}window.document.head.appendChild(i)}else window.document.head.innerHTML='<base href="'+o+'">'},_helper:void 0,interfaceFunctionName:void 0,create:function(e,o,t,i){this.security(),this._baseURI(e);var r=window;console.log("\n\n------------------------------------"),console.debug("# SWF Interface"),this._helper=new n(e,o,r),this._helper.createSWF(t),this.interfaceFunctionName=this.interfaceFunctionName||"jjCall",this._helper.swfInterface(this.interfaceFunctionName),console.log("* created SWF"),console.log("------------------------------------\n\n"),this._helper._onLoadComplate(i)},toSWF:function(e,n){return this._helper.toSWF(e,n)}}}(window.$$_module),function(e){function n(){function e(){if(!$){try{var e=F.getElementsByTagName("body")[0].appendChild(v("span"));e.parentNode.removeChild(e)}catch(e){return}$=!0;for(var n=W.length,o=0;o<n;o++)W[o]()}}function n(e){$?e():W[W.length]=e}function o(e){if(typeof C.addEventListener!=A)C.addEventListener("load",e,!1);else if(typeof F.addEventListener!=A)F.addEventListener("load",e,!1);else if(typeof C.attachEvent!=A)_(C,"onload",e);else if("function"==typeof C.onload){var n=C.onload;C.onload=function(){n(),e()}}else C.onload=e}function t(){k?i():r()}function i(){var e=F.getElementsByTagName("body")[0],n=v(N);n.setAttribute("type",O);var o=e.appendChild(n);if(o){var t=0;!function(){if(typeof o.GetVariable!=A){var i=o.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),B.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(t<10)return t++,void setTimeout(arguments.callee,10);e.removeChild(n),o=null,r()}()}else r()}function r(){var e=P.length;if(e>0)for(var n=0;n<e;n++){var o=P[n].id,t=P[n].callbackFn,i={success:!1,id:o};if(B.pv[0]>0){var r=h(o);if(r)if(!j(P[n].swfVersion)||B.wk&&B.wk<312)if(P[n].expressInstall&&l()){var c={};c.data=P[n].expressInstall,c.width=r.getAttribute("width")||"0",c.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(c.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(c.align=r.getAttribute("align"));for(var w={},u=r.getElementsByTagName("param"),f=u.length,p=0;p<f;p++)"movie"!=u[p].getAttribute("name").toLowerCase()&&(w[u[p].getAttribute("name")]=u[p].getAttribute("value"));s(c,w,o,t)}else d(r),t&&t(i);else m(o,!0),t&&(i.success=!0,i.ref=a(o),t(i))}else if(m(o,!0),t){var v=a(o);v&&typeof v.SetVariable!=A&&(i.success=!0,i.ref=v),t(i)}}}function a(e){var n=null,o=h(e);if(o&&"OBJECT"==o.nodeName)if(typeof o.SetVariable!=A)n=o;else{var t=o.getElementsByTagName(N)[0];t&&(n=t)}return n}function l(){return!U&&j("6.0.65")&&(B.win||B.mac)&&!(B.wk&&B.wk<312)}function s(e,n,o,t){U=!0,x=t||null,E={success:!1,id:o};var i=h(o);if(i){"OBJECT"==i.nodeName?(y=c(i),I=null):(y=i,I=o),e.id=D,(typeof e.width==A||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==A||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var r=B.ie&&B.win?"ActiveX":"PlugIn",a="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+F.title;if(typeof n.flashvars!=A?n.flashvars+="&"+a:n.flashvars=a,B.ie&&B.win&&4!=i.readyState){var l=v("div");o+="SWFObjectNew",l.setAttribute("id",o),i.parentNode.insertBefore(l,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}w(e,n,o)}}function d(e){if(B.ie&&B.win&&4!=e.readyState){var n=v("div");e.parentNode.insertBefore(n,e),n.parentNode.replaceChild(c(e),n),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(c(e),e)}function c(e){var n=v("div");if(B.win&&B.ie)n.innerHTML=e.innerHTML;else{var o=e.getElementsByTagName(N)[0];if(o){var t=o.childNodes;if(t)for(var i=t.length,r=0;r<i;r++)1==t[r].nodeType&&"PARAM"==t[r].nodeName||8==t[r].nodeType||n.appendChild(t[r].cloneNode(!0))}}return n}function w(e,n,o){var t,i=h(o);if(B.wk&&B.wk<312)return t;if(i)if(typeof e.id==A&&(e.id=o),B.ie&&B.win){var r="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?n.movie=e[a]:"styleclass"==a.toLowerCase()?r+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(r+=" "+a+'="'+e[a]+'"'));var l="";for(var s in n)n[s]!=Object.prototype[s]&&(l+='<param name="'+s+'" value="'+n[s]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+l+"</object>",T[T.length]=e.id,t=h(e.id)}else{var d=v(N);d.setAttribute("type",O);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?d.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&d.setAttribute(c,e[c]));for(var w in n)n[w]!=Object.prototype[w]&&"movie"!=w.toLowerCase()&&u(d,w,n[w]);i.parentNode.replaceChild(d,i),t=d}return t}function u(e,n,o){var t=v("param");t.setAttribute("name",n),t.setAttribute("value",o),e.appendChild(t)}function f(e){var n=h(e);n&&"OBJECT"==n.nodeName&&(B.ie&&B.win?(n.style.display="none",function(){4==n.readyState?p(e):setTimeout(arguments.callee,10)}()):n.parentNode.removeChild(n))}function p(e){var n=h(e);if(n){for(var o in n)"function"==typeof n[o]&&(n[o]=null);n.parentNode.removeChild(n)}}function h(e){var n=null;try{n=F.getElementById(e)}catch(e){}return n}function v(e){return F.createElement(e)}function _(e,n,o){e.attachEvent(n,o),M[M.length]=[e,n,o]}function j(e){var n=B.pv,o=e.split(".");return o[0]=parseInt(o[0],10),o[1]=parseInt(o[1],10)||0,o[2]=parseInt(o[2],10)||0,n[0]>o[0]||n[0]==o[0]&&n[1]>o[1]||n[0]==o[0]&&n[1]==o[1]&&n[2]>=o[2]}function g(e,n,o,t){if(!B.ie||!B.mac){var i=F.getElementsByTagName("head")[0];if(i){var r=o&&"string"==typeof o?o:"screen";if(t&&(L=null,R=null),!L||R!=r){var a=v("style");a.setAttribute("type","text/css"),a.setAttribute("media",r),L=i.appendChild(a),B.ie&&B.win&&typeof F.styleSheets!=A&&F.styleSheets.length>0&&(L=F.styleSheets[F.styleSheets.length-1]),R=r}B.ie&&B.win?L&&typeof L.addRule==N&&L.addRule(e,n):L&&typeof F.createTextNode!=A&&L.appendChild(F.createTextNode(e+" {"+n+"}"))}}}function m(e,n){if(z){var o=n?"visible":"hidden";$&&h(e)?h(e).style.visibility=o:g("#"+e,"visibility:"+o)}}function b(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=A?encodeURIComponent(e):e}var y,I,x,E,L,R,A="undefined",N="object",O="application/x-shockwave-flash",D="SWFObjectExprInst",C=window,F=window.document,S=window.navigator,k=!1,W=[t],P=[],T=[],M=[],$=!1,U=!1,z=!0,B=function(){var e=typeof F.getElementById!=A&&typeof F.getElementsByTagName!=A&&typeof F.createElement!=A,n=S.userAgent.toLowerCase(),o=S.platform.toLowerCase(),t=/win/.test(o?o:n),i=/mac/.test(o?o:n),r=!!/webkit/.test(n)&&parseFloat(n.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a=!1,l=[0,0,0],s=null;if(typeof S.plugins!=A&&typeof S.plugins["Shockwave Flash"]==N)!(s=S.plugins["Shockwave Flash"].description)||typeof S.mimeTypes!=A&&S.mimeTypes[O]&&!S.mimeTypes[O].enabledPlugin||(k=!0,a=!1,s=s.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),l[0]=parseInt(s.replace(/^(.*)\..*$/,"$1"),10),l[1]=parseInt(s.replace(/^.*\.(.*)\s.*$/,"$1"),10),l[2]=/[a-zA-Z]/.test(s)?parseInt(s.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof C.ActiveXObject!=A)try{var d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");d&&(s=d.GetVariable("$version"))&&(a=!0,s=s.split(" ")[1].split(","),l=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}catch(e){}return{w3:e,pv:l,wk:r,ie:a,win:t,mac:i}}();(function(){B.w3&&((typeof F.readyState!=A&&"complete"==F.readyState||typeof F.readyState==A&&(F.getElementsByTagName("body")[0]||F.body))&&e(),$||(typeof F.addEventListener!=A&&F.addEventListener("DOMContentLoaded",e,!1),B.ie&&B.win&&(F.attachEvent("onreadystatechange",function(){"complete"==F.readyState&&(F.detachEvent("onreadystatechange",arguments.callee),e())}),C==top&&function(){if(!$){try{F.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),B.wk&&function(){if(!$)/loaded|complete/.test(F.readyState)?e():setTimeout(arguments.callee,0)}(),o(e)))})(),function(){B.ie&&B.win&&window.attachEvent("onunload",function(){
for(var e=M.length,n=0;n<e;n++)M[n][0].detachEvent(M[n][1],M[n][2]);for(var o=T.length,t=0;t<o;t++)f(T[t]);for(var i in B)B[i]=null;B=null;for(var r in swfobject)swfobject[r]=null;swfobject=null})}();return{registerObject:function(e,n,o,t){if(B.w3&&e&&n){var i={};i.id=e,i.swfVersion=n,i.expressInstall=o,i.callbackFn=t,P[P.length]=i,m(e,!1)}else t&&t({success:!1,id:e})},getObjectById:function(e){if(B.w3)return a(e)},embedSWF:function(e,o,t,i,r,a,d,c,u,f){var p={success:!1,id:o};B.w3&&!(B.wk&&B.wk<312)&&e&&o&&t&&i&&r?(m(o,!1),n(function(){t+="",i+="";var n={};if(u&&typeof u===N)for(var h in u)n[h]=u[h];n.data=e,n.width=t,n.height=i;var v={};if(c&&typeof c===N)for(var _ in c)v[_]=c[_];if(d&&typeof d===N)for(var g in d)typeof v.flashvars!=A?v.flashvars+="&"+g+"="+d[g]:v.flashvars=g+"="+d[g];if(j(r)){var b=w(n,v,o);n.id==o&&m(o,!0),p.success=!0,p.ref=b}else{if(a&&l())return n.data=a,void s(n,v,o,f);m(o,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){z=!1},ua:B,getFlashPlayerVersion:function(){return{major:B.pv[0],minor:B.pv[1],release:B.pv[2]}},hasFlashPlayerVersion:j,createSWF:function(e,n,o){return B.w3?w(e,n,o):void 0},showExpressInstall:function(e,n,o,t){B.w3&&l()&&s(e,n,o,t)},removeSWF:function(e){B.w3&&f(e)},createCSS:function(e,n,o,t){B.w3&&g(e,n,o,t)},addDomLoadEvent:n,addLoadEvent:o,getQueryParamValue:function(e){var n=F.location.search||F.location.hash;if(n){if(/\?/.test(n)&&(n=n.split("?")[1]),null==e)return b(n);for(var o=n.split("&"),t=0;t<o.length;t++)if(o[t].substring(0,o[t].indexOf("="))==e)return b(o[t].substring(o[t].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var e=h(D);e&&y&&(e.parentNode.replaceChild(y,e),I&&(m(I,!0),B.ie&&B.win&&(y.style.display="block")),x&&x(E)),U=!1}}}}e.api2.swfobject=function(){return n()}}(window.$$_module),function(e){function n(n){function o(e){if(e){var n=window.jj._global.getWindows(e);return n}var o=0,t={},i=window.jj._global.getFrames(window.jj._frame_id),r=i.windows;for(var a in r){var e=r[a],n=window.jj._global.getWindows(e);t[e]=n,o++}return t.length=o,t}function t(e){if(e){var n=window.jj._global.getFrames(window.jj._frame_id);if(n){var o=n.windows;for(var t in o){var i=o[t],r=window.jj._global.getWindows(i);if(r){if(e(r.window))return!0}}return!1}}}function i(e){var e=e||window.jj._frame_id;return window.jj._global.getRootWindow(e)}function r(e){var e=e||window.jj._frame_id;return window.jj._global.getContainerWindow(e)}if(console.log("##############"),console.log("# JJ API"),console.log("##############"),n||alert("전역 데이터가 전달되지 않았습니다."),console.log("\t* Viewer 확인"),console.log("\t* 이벤트 모델 확인(window chainning)"),console.log("\t* 통신 및 API 생성 확인"),window.jj=function(e){return{_id:null,_frame_id:null,_isFullscreen:!1,_focused:!1,_parentID:null,_global:e,_option:null,_isPrintMode:!1,parent:function(){var e=window.jj.getWindows(window.jj._parentID);return e?e.window:null},opener:function(){var e,n=window.jj.getRootWindow(window.jj._frame_id);return n.opener&&n.opener.jj&&(e=window.jj.getRootWindow(n.opener.jj._frame_id)),e},getWindows:o,eachWindows:t,getRootWindow:i,getContainerWindow:r,_destroy:null}}(n),window.jj._path=e.api.path,"root"==window._jj_type&&(window.jj._root=e.api.root),window.jj.link=e.api.linker,window.jj.event=e.api.listener,window.jj.native=e.api.native,window.jj.io=e.api.io,window.jj.newSWF=e.api2.swf,window.jj.newBeatPattern=e.api2.BeatPattern,window.jj.record=e.api2.recorder,window.open=window.jj.link.html,window.close=window.jj.native.close,"root"==window._jj_type)window.opener&&window.opener.jj?window.jj._root.onRootPageChange():window._jj_isLauncherPage||(console.debug("# opener window를 찾을 수 없습니다.\n옵션 설정을 뒤로 미룹니다.\n"+window.location.href),window.jj._root.onSelfPageChange(window));else{var a=window.parent.jj._frame_id;window.jj.getRootWindow(a).jj._root.onSelfPageChange(window)}var l=window.nw.Window.get();window._jj_isLauncherPage?(window.jj._frame_id=n.addFrame(l,"_frame_launcher"),window.jj._id=n.addWindow(window,"_frame_launcher_window")):(window.jj._frame_id=n.addFrame(l),window.jj._id=n.addWindow(window,window.jj._id)),window._jj_clearedPage&&(console.debug("# jj._id가 정의(등록) 되어있지 않아 지연되었던 옵션 설정을 다시 시도합니다."),window.jj._root.onSelfPageChange(window),delete window._jj_clearedPage)}e.core.api={run:n}}(window.$$_module),function(e){function n(e,n,a){function l(){(h||v)&&s(h,v),j&&(e.jj._global._focusedWindow=e,e.jj._focused=!0,w.focus()),_?(e.jj._isFullscreen=!0,w.enterFullscreen()):g&&m?w.maximize():g?w.minimize():m&&w.maximize()}function s(n,o){function t(){n&&(n=n+window.outerWidth-window.innerWidth),o&&(o=o+window.outerHeight-window.innerHeight),(n||o)&&(n=n||w.width,o=o||w.height,w.resizeTo(n,o))}if(e.jj._isFullscreen)return e.jj.native.toggleFullscreen(),void setTimeout(function(){t()});t()}function d(){var n=p&&!c?p.onOpen:void 0,o=p&&!c?p.onClose:void 0;r(w,e,o),i(w,e,n)}var c="root"==e._jj_type;console.debug("# Window 옵션 적용 (",a,") : ",e._jj_type," - ",e.jj._id),console.debug("# option : ",n);var w=window.nw.Window.get(e);if(function(){c&&w.on("new-win-policy",function(e,n,o){o.setNewWindowManifest({transparent:!1,frame:!0,width:w.width,height:w.height})})}(),!n){var u=e.jj.getRootWindow(e.parent.jj._frame_id);return u?(e.jj._isFullscreen=u.jj._isFullscreen,e.jj._focused=u.jj._focused,void d()):(console.debug("# jj._id 및 참조할 객체를 찾을 수 없어 옵션 설정을 뒤로 미룹니다."),void(e._jj_clearedPage=!0))}e._jj_removeWindowHandler=o(w,e),e._jj_removeKeyHandler=t(w,e);var f=n._state,p=n._custom;if(f&&(e.jj._isFullscreen=f._isFullscreen,e.jj._focused=f._focused),p){e.jj.parameter=p.parameter;var h,v,_,j,g,m,b=!0;for(var y in p){var I=p[y];console.log("\t- ",y," : ","function"==typeof I?"Function":I),"maximize"==y?m=I:"minimize"==y?g=I:"width"==y?h=p.width:"height"==y?v=p.height:"focus"==y||"_focused"==y?j=I:"resizable"==y?w.setResizable(I):"alwaysOnTop"==y?w.setAlwaysOnTop(I):"fullscreen"==y?_=I:"show"==y&&(b=I)}if(!b)return window.$$firstSizeSetting=l,w.hide(),void d();l()}d()}function o(e,n){function o(){l.jj.eachWindows(function(e){e.jj&&(e.jj._isFullscreen=!0)}),n.jj&&(n.jj._global._fullscreenWindow=n,console.log("* enter-fullscreen : ",n.jj._id))}function t(){l.jj.eachWindows(function(e){e.jj&&(e.jj._isFullscreen=!1)}),n.jj&&(n.jj._global._fullscreenWindow=null,console.log("* restore : ",n.jj._id))}function i(){n.jj&&(n.jj._focused=!0,n.jj._global._focusedWindow=n)}function r(){n.jj&&(n.jj._focused=!1,n.jj._global._focusedWindow=null)}function a(e,n){"root"==n._jj_type&&(e.removeListener("enter-fullscreen",o),e.removeListener("restore",t)),e.removeListener("focus",i),e.removeListener("blur",r)}var l=window;return"root"==n._jj_type&&(e.on("enter-fullscreen",o),e.on("restore",t)),e.on("focus",i),e.on("blur",r),a}function t(e,n){function o(e){if(e.keyCode==a.ESCAPE){var o=n.jj._isFullscreen,t=n.jj._focused;return o&&t?n.jj.native.toggleFullscreen():console.log("# Esc키 동작 무시"),!1}}function t(e,n){n.removeEventListener("keydown",o)}return n.addEventListener("keydown",o),console.debug("# 키 동작 리스너 등록 : ",n.jj._id),t}function i(e,n,o){n._jj_openListener=function(){try{o&&o(n)}catch(e){alert("[onOpen 콜백 함수에서 스크립트 오류]\n\n"+(e.stack||e))}}}function r(e,n,o){n._jj_closeListener=function(){if(!n)return!1;if(n.jj){var t=n.jj._closeData,i=n.jj.opener(),r=n.jj.parent();try{if(o&&r&&o.apply(r,[t,n]))return!0}catch(e){alert("[onClose 콜백 함수에서 스크립트 오류]\n\n"+(e.stack||e))}if(n.jj.event._callHandler("close",[t,i]))return!0}try{n._jj_removeWindowHandler&&n._jj_removeWindowHandler(e,n),n._jj_removeKeyHandler&&n._jj_removeKeyHandler(e,n)}catch(e){console.error("[onClose 콜백 함수 jj removeHandler 오류]",e.stack||e)}return!1}}e.core.chain={run:n};var a={ENTER:13,ESCAPE:27,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40}}(window.$$_module),function(e){function n(e){return console.log("##############"),console.log("# DATA 설정"),console.log("##############"),g=t(),o(e),i(),r(),g}function o(e){var n=["description","domain","licenses","name","version"],o={};for(var t in n){var i=n[t];o[i]=e[i]}g.manifest=o}function t(){return{isDevelopment:"development"==process.env.NODE_ENV,path:{},config:{},manifest:{},_createID:s,addFrame:d,removeFrame:c,getFrames:w,addWindow:u,removeWindow:f,getWindows:p,getRootWindow:h,getContainerWindow:_,getContainerFrame:v,getIframeNode:j,_focusedWindow:null,_fullscreenWindow:null,_readyCallLinkWindowIDs:{}}}function i(){var e=process.env.BINDER_APP_FOLDER;e||(e=window.nw.App.argv[0]||"bin"),g.isDevelopment?(console.debug("# 개발 환경에서 실행중 입니다."),m=a(I,"../../"),y=a(m,"./"+e),b=a(I,"../../"+e)):(m=a(I,"../../"+e),y=a(m,"./"),b=a(I,"../../"+e));var n=a(b,"./resource"),o=a(b,"./user"),t=a(n,"./config.json"),i=a(y,"./viewer"),r=(process.env.TEMP||process.env.TMP)+"/"+O;r=r.replace(/\\/g,"/"),g.path={tempFolder:r,_exec:l(I),_config:t,_root:y,root:l(y),_resource:n,resource:l(n),_user:o,user:l(o),viewer:{blank:l(i,"./blank.html"),window:l(i,"./window.html"),_base:i,ebook:l(i,"./ebook/index.html"),image:l(i,"./image/index.html"),pdf:l(i,"./pdf/index.html"),audio:l(i,"./audio/index.html"),video:l(i,"./video/index.html"),flash:l(i,"./flash/index.html"),web:l(i,"./web/index.html")}},console.log("# 전역변수 생성 : ",g)}function r(){var e=require(g.path._config);g.config=e,console.debug("\t- config : ",e)}function a(e,n){var o=require("path");return n?o.resolve(e,n).replace(/\\/g,"/"):e.replace(/\\/g,"/")}function l(e,n){var o=a(e,n);return o=o.replace(/\\/gim,"/"),0==o.indexOf(y)&&(o=o.replace(y,"")),o||(o="/"),o}function s(e){var n;if(e==x)n=e+E,E++;else{void 0===L[e]&&(L[e]=0);n=e+L[e],L[e]++}return n}function d(e,n){for(var o in R)if("length"!=o){var t=R[o].frame;if(t.frameId==e.frameId)return o}return n||(n=s(x)),console.debug("# FRAME ID 등록 : "+n),R[n]={frame:e,windows:[],id:n},R.length++,console.log("* _frames : ",R),n}function c(e){if(R[e]){var n=R[e].windows;for(var o in n){f(n[o])}return console.debug("# FRAME ID 삭제 : "+e),R[e]=null,delete R[e],--R.length}}function w(e){return e?R[e]:R}function u(e,n){for(var o in A)if("length"!=o&&A[o].window==e)return o;n||(n=s(e.jj._frame_id+"_"+e._jj_type+"_")),console.debug("# WINDOW ID 등록 : "+n+" : ",e.location.pathname),A[n]||A.length++;var t=e.jj._frame_id;A[n]={window:e,frameID:t,id:n,chromeFrameId:void 0};var i=w(t).windows;return i.indexOf(n)<0&&i.push(n),console.log("* _windows : ",A),console.log("\t - frame windows : ",i.toString()),n}function f(e){var n=p(e);if(n){var o=w(n.frameID);if("root"==n.window._jj_type)o.windows=[];else{var t=o.windows.indexOf(e);t>-1&&o.windows.splice(t,1)}return n.window&&n.window.jj&&n.window.jj._destroy(),console.debug("# WINDOW ID 삭제 : "+e),A[e]=null,delete A[e],--A.length}}function p(e){return e?A[e]:A}function h(e){var n=w(e).windows;if(!n||n.length<1)return null;for(var o=p(n[0]).window,t=o.parent;t&&t&&t!=o;)o=t;return o}function v(e){var n=h(e);return n?n.document.getElementById(N):null}function _(e){var n=v(e);return n?n.contentWindow:null}function j(e){var n;if(e){var o=p(e);n=o.window,console.error("winObj : ",e,o)}else n=window;var t,i=n.parent.document.querySelectorAll("iframe");for(var r in i){var a=i[r];if(a.contentWindow===n){t=a;break}}return t}e.core.data={run:n};var g,m,b,y,I=process.execPath,x="frame_",E=0,L={},R={length:0},A={length:0},N="_jjContainerFrame_",O=window.location.host}(window.$$_module),function(e){function n(){var e=require(__dirname+"/package.json"),n='font-family: "Malgun Gothic"; font-weight: bold;';console.log("%c%s%c%s","color: #F44336; font-size: 20px;"+n,e.name,"color: #444444; font-size: 14px;"+n," ver."+e.version),console.log("%c%s","color: #444444; font-size: 12px;"+n,"pdi1066@naver.com ⓒ vulcan."),function(){for(var e=["log","info","warn","debug","trace","dir","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","dirxml","assert","count","markTimeline","timeStamp","clear"],n=0;n<e.length;n++)console[e[n]]=function(){}}()}e.core.log={run:n}}(window.$$_module)}}(),function(e){if(e){var n=e("child_process"),o=window.nw.App.manifest.splash||!1;o&&window.nw.App.on("open",function(){"win32"===process.platform&&(function(){n.exec("taskkill /IM launcher.exe /T /F",{})}(),"socket"===o&&function(){var n=e("net"),o=new n.Socket;o.connect(637,"127.0.0.1",function(){console.log("Connected : ",637),o.write("mainPageLoaded"),o.end()}),o.on("data",function(e){console.log("Received: "+e)}),o.on("error",function(e){console.log("error: "+e)}),o.on("close",function(){console.log("Connection closed")})}())})}}(window.require);var APP_ID="tb2015tc1mm_42h_dvd",CLIENT_DOMAIN=APP_ID,domain=CLIENT_DOMAIN.indexOf("CLIENT_DOMAIN")<0?CLIENT_DOMAIN:"jikji.binder.demo";console.debug("# 페이지 표시 준비 : ",window.location.href),function(e){var n=window.location.href,o=window&&window.parent&&window.parent!=window;if(0===n.indexOf("http://")||0===n.indexOf("https://"))return console.log("# [ Root ] 외부 링크 이동"),void console.log("# [ Root ] ",n);if(!(n.indexOf("about:blank")>-1)){if(n.indexOf("chrome-error://chromewebdata")>-1){if(o){var t=window.parent.location.href;if(0===t.indexOf("http://")||0===t.indexOf("https://"))return}var i="chrome-extension://"+domain+"/viewer/blank.html";return void window.location.replace(i)}if(window.nw&&window.process){window.process.setMaxListeners(0);try{void 0===window.process.env.NODE_ENV&&(window.process.env.NODE_ENV="production");var r=!0;if(0!==window.location.host.indexOf(domain)&&(r=!1),r){var a=window.opener||window.parent;a.jj&&a.jj._global.config.debug&&(window.process.env.NODE_ENV="debug")}if("production"==window.process.env.NODE_ENV){e.core.log.run()}}catch(e){console.error("[Error] : "+e),alert("[Error] : "+e)}}}}(window.$$_module),console.debug("# 페이지 시작 : ",window.location.href),function(e){function n(){if(window.nw&&window.nw.Window){window.nw.Window.get().removeAllListeners("close")}}function o(e){var n=g+p;e&&(n=n+"?error="+encodeURIComponent(e)),window.location.replace(n)}function t(){window.jj._global=null,window.jj=null,window.global.gc(),window.global=null}function i(){console.debug("# CONTAINER 실행 (",Boolean(window.nw),") : ",w),window._jj_initialized=!1,window._jj_type="root",r();var e,n=window.opener||window.parent;e=n.jj?n.jj._global:a(),l(e)}function r(){console.log("\n\n"),console.log("# Application By Vulcan. ⓒ . pdi1066@naver.com"),console.log("\n\n"),window.process&&(console.log("# 실행 폴더를 확인"),console.log("\t* node.js : ",window.process.version," - ",window.process.versions),console.log("\t* cwd : ",window.process.cwd()),console.log("\t* execPath : ",window.process.execPath))}function a(){var n=e.core.data,o=window.nw.App.manifest;return n.run(o)}function l(n){e.core.api.run(n)}function s(){if(window&&window.jj){var e=!1;return window.jj.eachWindows(function(n){if(n&&n._jj_closeListener&&(console.log("* close 이벤트 전달 : "+n.jj._id," : "),e=n._jj_closeListener()))return!0}),e}}function d(){function e(e){e.preventDefault();var n="# window 스크립트 오류가 발생 했습니다.\n";n=e.error?n+"\n[ERROR] : "+e.error.message+"\n\n"+e.error.stack:n+"\n[ERROR] : "+e.message+"\n\n"+e.filename+":"+e.lineno,console.error(n)}function n(){window.removeEventListener("error",e)}return window.addEventListener("error",e),n}function c(e){var n="# Uncaught Exception 오류가 발생 했습니다.\n[Caught Exception] : "+e+"\n\n"+e.stack;console.error(n)}var w=window.location.href;console.log("\n");var u="/viewer/window.html",f="data:text/html,chromewebdata",p="/viewer/blank.html",h=0===w.indexOf("http://")||0===w.indexOf("https://"),v=function(e){var n=e.location.href;return!(0!==n.indexOf("http://")&&0!==n.indexOf("https://"))||e&&e.parent&&e.parent!=e}(window);console.debug("IFRAME : (",v,")",w);var _="tb2015tc1mm_42h_dvd",j=_.indexOf("CLIENT_DOMAIN")<0?_:"jikji.binder.demo",g="chrome-extension://"+j;if(h)return console.debug("# 외부 링크 이동 (start 제어 중지) : ",w),void n();if("data:,"===w){var m=function(){var e,n=window.parent.document.querySelectorAll("iframe");for(var o in n){var t=n[o];if(t.contentWindow===window){e=t;break}}return e}();return console.warn("# [ IFrame ] 기본 페이지로 이동( data:, ) : "+w,m.src),void o("[ IFrame ] \nRefused to display link in a frame because it set 'X-Frame-Options' to 'sameorigin'.\nGET http://... or https://... net::ERR_BLOCKED_BY_RESPONSE")}if(v){if(w.indexOf("about:blank")>-1)return console.warn("# [ IFrame ] 기본 페이지로 이동( 빈 페이지 ) : "+w),void o("[ IFrame ] 빈페이지 호출 : "+w);if(w.indexOf(f)>-1||w.indexOf("chrome-error://chromewebdata")>-1)return void console.warn("# [ IFrame ] 기본 페이지로 이동( 잘못된 페이지 ) : "+w);if(0!==window.location.host.indexOf(j))return console.debug("# [ IFrame ] 다른 도메인의 페이지는 관여하지 않음 (하위 도메인은 허용)"),console.debug("# [ IFrame ] ",w),void n()}else if(w.indexOf("/launcher.html")<0&&w.indexOf(u)<0){if(window.location.pathname==p)return console.warn("# [ Root ] 기본 페이지로 이동( Blank 페이지 ) : "+w),void window.location.replace(g+u+"?url="+p);if(w.indexOf("about:blank")>-1)return console.warn("# [ Root ] 기본 페이지로 이동( 빈 페이지 ) : "+w),void window.location.replace(g+u+"?url="+p);if(w.indexOf(f)>-1||w.indexOf("chrome-error://chromewebdata")>-1)return console.warn("# [ Root ] 기본 페이지로 이동( 잘못된 페이지 ) : "+w),void window.location.replace(g+u+"?url="+p);if(0!==window.location.host.indexOf(j))return console.debug("# [ Root ] 다른 도메인의 페이지는 관여하지 않음 (하위 도메인은 허용)"),console.debug("# [ Root ] ",w),n(),void(window.nw&&window.nw.Window&&i());w=w.replace(window.location.origin,""),console.debug("# 잘못된 컨텐츠 링크 필터링 : ",w);var b=encodeURIComponent(w);return void window.location.replace(u+"?url="+b)}if(!window.nw||!window.process)return v?void console.error("# Native 지원 되지 않음 ( 다시 로드 안함 )"+w):void console.error("# Native 지원 되지 않음 ( 다시 로드 안함 ) : "+w);var y=require(__dirname+"/package.json"),I='font-family: "Malgun Gothic"; font-weight: bold;';console.log("%c%s%c%s","color: #F44336; font-size: 20px;"+I,y.name,"color: #444444; font-size: 14px;"+I," ver."+y.version),console.log("%c%s","color: #398c3c; font-size: 12px;"+I,"vulcan ⓒ (pdi1066@naver.com)"),console.log("\n");var x,E,L,R;console.debug("# INJECTION START (iframe : ",v,") : ",w),v?(!function(){var e=window.parent;console.debug("# IFRAME CONTENT 실행 (",Boolean(window.nw),") : ",w),console.log("\t* parent type: ",'"'+e._jj_type+'"'),console.log("\t* parent url : ",e.location.href),r(),"root"==e._jj_type?window._jj_type="container":window._jj_type="content",e.jj&&l(e.jj._global)}(),window.jj&&("container"!==window._jj_type&&(R=function(){function e(){window.jj&&(window.jj._isPrintMode=!0)}function n(){window.jj&&(window.jj._isPrintMode=!1)}function o(o){o.matches?e():n()}function t(){r?i.removeListener(o):(window.removeEventListener("beforeprint",e),window.removeEventListener("afterprint",n))}var i=window.matchMedia("print"),r=Boolean(window.matchMedia);return r?i.addListener(o):(window.addEventListener("beforeprint",e),window.addEventListener("afterprint",n)),t}()),x=d(),window.jj._destroy=function(){console.debug("# DESTROY CONTENT : ",window.jj._id),R&&R(),x&&x(),t()})):(E=function(){function e(){if(window&&window._jj_initialized&&window.jj){try{if(this.window.jj&&this.window.jj._isPrintMode)return void alert("인쇄를 종료하세요.\n인쇄 미리보기를 종료하려면 화면 왼쪽 취소 버튼을 클릭하세요.");if(0===A){if(s())return}else 1===A&&window.nw.App.quit()}catch(e){return++A,void console.error("# onCloseHandler 에러 : ",e)}this.hide(),this.removeAllListeners("enter-fullscreen"),this.removeAllListeners("restore"),this.removeAllListeners("focus"),this.removeAllListeners("blur"),this.removeAllListeners("close"),this.removeAllListeners("closed"),window&&window.jj&&window.jj._root&&(console.log("# FRAME CLOSE : ",w),window.jj._root.destroy());var e=this;setTimeout(function(){e.close(!0)},100)}}function n(){o&&o.removeListener("close",e)}var o=window.nw.Window.get();return o.on("close",e),n}(),function(){console.log("* manifest.main : ",window.nw.App.manifest.main);var e=window.nw.App.manifest.main.replace(/\\/gim,"/");e=e.replace(/file:\/\//gim,""),e=e.replace(/file:\\\\/gim,""),e=e.replace(__dirname,""),e.indexOf("?")>-1&&(e=e.substring(0,e.indexOf("?")));return"chrome-extension:"==window.location.protocol&&window.location.pathname==e}()?function(){console.debug("# LAUNCHER 실행 (",Boolean(window.nw),") : ",w),window._jj_isLauncherPage=!0,window._jj_type="root",r(),l(a())}():i(),window.jj&&(x=d(),L=function(){function e(){window.process.removeListener("uncaughtException",c)}return console.debug("# uncaughtException 등록"),window.process.on("uncaughtException",c),e}(),window.jj._destroy=function(){console.debug("# DESTROY : ",window.jj._id),x&&x(),E&&E(),L&&L(),t()}),window._jj_initialized=!0),window.jj&&console.debug("# Window 확인 : ",window.jj._frame_id,"/",window.jj._id,":",w);var A=0}(window.$$_module);