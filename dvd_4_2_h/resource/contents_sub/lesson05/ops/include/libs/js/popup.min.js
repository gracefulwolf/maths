"use strict";(function(){function t(t){return new s(t)}function s(t){this.container=t.container,this.popupPages=t.popupPages,this.btn=t.btn,this.page=t.page,this.idx=t.idx,this.Mode=t.Mode,this.UIHidden=t.UIHidden,this.callBack=t.callBack,this.isOpened=!1,this.set=function(){this.btn.hasAttribute("data-popup-option")&&this.addOption(),this.closeBtn=$ts.ce({tag:"div",class:"popup_closeBtn",parent:this.page}),this.toggle?this.btn.addEventListener("click",this.viewToggle.bind(this)):this.btn.addEventListener("click",this.open.bind(this)),this.closeBtn.addEventListener("click",this.close.bind(this)),$ts.addHoverEvents(this.closeBtn,"preventDefault"),$ts.addHoverEvents(this.btn,"preventDefault"),this.btn.addEventListener("click",window.$efSound.click),this.closeBtn.addEventListener("click",window.$efSound.click)},this.addOption=function(){var t=this.btn.getAttribute("data-popup-option");for(var s in t=t.replace(/ /g,"").split(","),t)this[t[s]]=!0},this.open=function(){this.toggle&&this.btn.classList.add("changeUpZIndex"),"pageChange"===this.Mode?this.pageOff():(this.pageResetZIndex(),this.page.style.zIndex=1),this.page.style.top="",this.page.style.left="",this.isOpened=!0,this.page.classList.add("on"),this.callBack&&this.callBack.open&&this.callBack.open(this)},this.close=function(){this.callBack&&this.callBack.close&&this.callBack.close(this),this.toggle&&this.btn.classList.add("changeUpZIndex"),this.isOpened=!1,this.page.classList.remove("on"),this.reset()},this.viewToggle=function(){this.isOpened?this.close():this.open()},this.reset=function(){this.callBack&&this.callBack.reset&&this.callBack.reset(this)},this.pageOff=function(){for(var t in $pm.array.popup)$pm.array.popup[t].close()},this.pageResetZIndex=function(){for(var t in this.popupPages)this.popupPages[t].style.zIndex=""},this.containerOn=function(){this.container.classList.contains("on")||this.container.classList.add("on")},this.containerOff=function(){var t=0;for(var s in this.popupPages)this.popupPages[s].classList.contains("on")&&t++;0===t&&this.container.classList.remove("on")},this.set()}window.$popup=t})();