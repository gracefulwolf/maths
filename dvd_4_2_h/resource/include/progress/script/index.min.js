"use strict";function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!_instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(function(){function e(e){var n=document.createElement(e.tag?e.tag:"div");return e.classname&&n.classList.add(e.classname),e.attrs&&t(n,e.attrs),e.text&&(n.innerHTML=e.text),e.parent?e.parent.appendChild(n):document.body.appendChild(n),e.callback&&e.callback(n),n}function t(e,t){t.forEach(function(t){e.setAttribute(t.name,t.value)})}function n(t){return e({parent:t,tag:"input",callback:function(e){e.type="checkbox",e.addEventListener("click",function(){e.hasAttribute("checked")?e.removeAttribute("checked"):e.setAttribute("checked",!0)})}})}function a(t,n){e({parent:t,classname:"sort",callback:function(e){e.addEventListener("click",function(){window.PROGRESS.sort(n)})}})}function s(){var t=e({classname:y.block.classname});return e({parent:t,classname:y.container.classname,callback:function(e){PROGRESS.scale=new k({target:e})}})}function i(t){return e({tag:"section",parent:t,callback:function(t){y.title&&e({tag:"h2",parent:t,classname:y.title.classname,text:y.title.text,callback:function(e){}})}})}function c(t,n,a){return e({parent:t,classname:n.classname,text:n.text,callback:a})}function o(t,n){var a=e({tag:"ul",parent:t,classname:n.classname});return e({tag:"li",parent:a,callback:function(e){r(e,n.children)}})}function r(t,s){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=function(c){e({parent:t,classname:s[c].classname,text:s[c].text,callback:function(e){i?u(c,e,i,s[c].afterText):("checkbox"===c&&n(e),s[c].sort&&a(e,c))}})};for(var o in s)c(o)}function l(t){var n=s(),a=i(n);if(y.closeButton&&c(a,y.closeButton,function(e){e.addEventListener("click",PROGRESS.closePopup)}),y.addListButton&&c(a,y.addListButton,function(e){e.addEventListener("click",PROGRESS.openAlert.bind(PROGRESS,"add"))}),y.removeListButton&&c(a,y.removeListButton,function(e){e.addEventListener("click",PROGRESS.removeList)}),y.toggleSelectButton&&c(a,y.toggleSelectButton,function(e){e.addEventListener("click",function(){PROGRESS.toggleAllSelectList()})}),y.list.head){var r=o(a,y.list.head),l=r.querySelector("input");l&&l.addEventListener("click",function(){PROGRESS.toggleAllSelectList()})}var u=e({classname:y.list.classname,parent:a,callback:function(e){}}),d=e({tag:"ul",parent:u,classname:y.list.progress.classname});t({containerElement:n,listElement:d})}function u(e,t,a,s){switch(e){case"checkbox":a.checkBox=n(t),a.checkBox.addEventListener("click",function(){a.selected?a.selected=!1:a.selected=!0});break;case"class":t.innerHTML=a.class;break;case"ebookPage":t.innerHTML=a.ebookPage,t.classList.add(a.contentsType),t.addEventListener("click",f.bind(null,a.ebookPage));break;case"date":t.innerHTML=a.date}s&&(t.innerHTML+=s)}function d(e){localStorage.setItem(y.storageName,JSON.stringify(e))}function f(e){var t="../../viewer/ebook/index.html",n="/viewer/ebook/index.html",a="../../resource/ebook/",s="/resource/ebook/",i=0;window.jj?window.jj.link.html(n+"?contentInformationURL="+s+"&page="+(e-i)+"&UUID=fcem:uuid:ebook","_self",{maximize:!0}):window.open(t+"?contentInformationURL="+a+"&page="+(e-i)+"&UUID=fcem:uuid:ebook","_self")}function m(){function t(e){e.style.transform="scale(".concat(PROGRESS.scale.zoomRate,")"),e.style.MsTransform="scale(".concat(PROGRESS.scale.zoomRate,")"),e.style.MozTransform="scale(".concat(PROGRESS.scale.zoomRate,")"),e.style.WebkitTransform="scale(".concat(PROGRESS.scale.zoomRate,")"),e.style.transformOrigin="50% 50%",e.style.MsTransformOrigin="50% 50%",e.style.MozTransformOrigin="50% 50%",e.style.WebkitTransformOrigin="50% 50%"}function n(t,n){var a=e({classname:"inputContainer",parent:t}),s=e({tag:"input",parent:a});return n&&e({tag:"span",classname:"afterText",parent:a,text:n}),s}function a(t){return e({parent:t,classname:y.alert.closeButton.classname,callback:function(e){e.addEventListener("click",PROGRESS.closeAlert)}})}function s(t,n,a){e({parent:t,classname:"buttons",callback:function(t){var s=function(s){a.btns[s]=e({parent:t,classname:s,text:n.buttons[s],callback:function(e){"incorrect"===s&&e.addEventListener("click",PROGRESS.closeAlert)}})};for(var i in n.buttons)s(i)}})}function i(t,n){e({tag:"p",parent:t,text:n})}function c(e){l.classList.add("on"),l.setAttribute("data-type",e)}function o(){l.classList.remove("on"),l.removeAttribute("data-type")}var r={},l=e({classname:y.alert.classname}),u=function(c){var o=y.alert.type[c],u={btns:{}};u.element=e({tag:"section",classname:c,parent:l,callback:function(e){t(e),i(e,o.text),o.input&&(u.input=n(e,o.input.afterText)),s(e,o,u),u.closeButton=a(e)}}),r[c]=u};for(var d in y.alert.type)u(d);return{element:l,type:r,on:c,off:o}}function p(e){return e.value}function h(e){var t,n,a,s,i,c=new Date;return t="yyyy"===e[0]?c.getFullYear():c.getFullYear()%100,n=g(c.getMonth()+1),a=g(c.getDate()),e.length>3&&(s="HH"===e[3]?c.getHours():c.getHours()%12,i=g(c.getMinutes())),e.length>3?"".concat(t,"-").concat(n,"-").concat(a," ").concat(s,":").concat(i):"".concat(t,"-").concat(n,"-").concat(a)}function g(e){return e<10?"0".concat(e):e}function S(){var e;return e=window.jj?window.parent.PAGING_ENDNUM:PAGING_ENDNUM,e||1}function b(){var e;return e=window.jj?window.parent.PAGING_ENDNUM:PAGING_ENDNUM,e?"ebook":"smart"}function v(){var e=localStorage.getItem(y.storageName);return e=e?JSON.parse(e):[{class:"3",ebookPage:"1",contentsType:"smart",date:"2020-03-01"},{class:"1",ebookPage:"2",contentsType:"ebook",date:"2020-03-02"},{class:"4",ebookPage:"3",contentsType:"smart",date:"2020-02-27"},{class:"5",ebookPage:"4",contentsType:"ebook",date:"2020-03-03"},{class:"7",ebookPage:"5",contentsType:"smart",date:"2020-02-28"},{class:"6",ebookPage:"6",contentsType:"smart",date:"2020-02-26"},{class:"2",ebookPage:"7",contentsType:"ebook",date:"2020-03-03"},{class:"8",ebookPage:"8",contentsType:"ebook",date:"2020-02-25"}],e.forEach(function(e,t){e.index=t,e.selected=!1}),e}var k=function(){function e(t){_classCallCheck(this,e),this.element=t.target,this.callback=t.callback?t.callback:null,window.addEventListener("resize",this.reSet.bind(this,this.element)),window.addEventListener("orientationchange",this.reSet.bind(this,this.element)),this.set(this.element)}return _createClass(e,[{key:"getContainer",value:function(){this.documentWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.documentHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},{key:"getZoomRate",value:function(){var e=this.documentWidth/this.element.clientWidth,t=this.documentHeight/this.element.clientHeight,n=this.element.clientWidth*t>this.documentWidth?e:t;return n}},{key:"set",value:function(e){this.getContainer(),this.element=e,this.zoomRate=this.getZoomRate(),this.left=(this.documentWidth-this.element.clientWidth*this.zoomRate)/2,this.setScale()}},{key:"setScale",value:function(){this.element.style.transform="scale("+this.zoomRate+")",this.element.style.MsTransform="scale("+this.zoomRate+")",this.element.style.MozTransform="scale("+this.zoomRate+")",this.element.style.WebkitTransform="scale("+this.zoomRate+")",this.element.style.transformOrigin="0% 0%",this.element.style.MsTransformOrigin="0% 0%",this.element.style.MozTransformOrigin="0% 0%",this.element.style.WebkitTransformOrigin="0% 0%",this.element.style.left=this.left+"px",this.callback&&this.callback(this)}},{key:"reSet",value:function(e){var t=this;setTimeout(function(){t.getContainer(),t.set(e)},50)}}]),e}();window.PROGRESS=window.PROGRESS||{};var y=window.PROGRESS.settings,R=function(){function t(){var n=this;_classCallCheck(this,t),_defineProperty(this,"setAlerts",function(){var e=function(e){var t=n.alerts.type[e];switch(e){case"add":case"close":t.input.addEventListener("input",function(){n.saveClassData=p(t.input)}),"close"===e?(t.btns.correct.addEventListener("click",n.addList.bind(n,!0)),t.btns.incorrect.addEventListener("click",n.close)):t.btns.correct.addEventListener("click",n.addList.bind(n,!1));break;case"remove":t.btns.correct.addEventListener("click",n.removeList.bind(n,!0));break;case"select":t.btns.correct.addEventListener("click",n.closeAlert)}};for(var t in n.alerts.type)e(t)}),_defineProperty(this,"afterCreate",function(e){var t=e.containerElement,a=e.listElement;n.containerElement=t,n.listElement=a,n.createProgressList(),PROGRESS.isMain&&n.containerElement.classList.add("isMain")}),_defineProperty(this,"createList",function(t){return t.element=e({tag:"li",parent:n.listElement,callback:function(e){r(e,y.list.progress.children,t)}}),t}),_defineProperty(this,"close",function(){window.CUSTOM_VIEWER_CODE="C_00",window.jj&&window.jj.native.close()}),_defineProperty(this,"openPopup",function(){n.containerElement.parentNode.classList.add("on")}),_defineProperty(this,"closePopup",function(){n.containerElement.parentNode.classList.remove("on")}),_defineProperty(this,"createProgressList",function(){n.listElement.innerHTML="",n.currentData=n.DATA.map(n.createList)}),_defineProperty(this,"resetInput",function(){n.saveClassData=null,n.alerts.type.add.input.value=""}),_defineProperty(this,"addList",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.saveClassData&&""!==n.saveClassData?(n.currentData.push({class:n.saveClassData,ebookPage:S(),contentsType:b(),date:h(n.dateType)}),d(n.currentData),n.createProgressList(),n.resetInput(),n.closeAlert(),e&&n.close()):alert("반을 입력하세요.")}),_defineProperty(this,"removeList",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!0===e?(d(n.currentData.filter(function(e){return!e.selected})),n.createProgressList(),n.closeAlert()):n.isSelected?n.openAlert("remove"):n.openAlert("select")}),_defineProperty(this,"toggleAllSelectList",function(){n.isAllSelected?(n.isAllSelected=!1,n.resetSelectList()):(n.isAllSelected=!0,n.allSelectList())}),_defineProperty(this,"allSelectList",function(){n.isAllSelected=!0,n.currentData.forEach(function(e){e.selected=!0,e.checkBox.setAttribute("checked",!0)})}),_defineProperty(this,"resetSelectList",function(){n.isAllSelected=!1,n.currentData.forEach(function(e){e.selected=!1,e.checkBox.removeAttribute("checked")})}),_defineProperty(this,"openAlert",function(e){n.alerts&&n.alerts.on(e)}),_defineProperty(this,"closeAlert",function(){n.alerts&&n.alerts.off()}),_defineProperty(this,"sort",function(e){var t;n.preType===e?n.isReverse=!n.isReverse:n.isReverse=!1,t=n.isReverse?n.currentData.sort(function(t,n){var a=parseInt(t[e].replace(/\-/g,"")),s=parseInt(n[e].replace(/\-/g,""));return s-a}):n.currentData.sort(function(t,n){var a=parseInt(t[e].replace(/\-/g,"")),s=parseInt(n[e].replace(/\-/g,""));return a-s}),n.listElement.innerHTML="",n.currentData=t.map(n.createList),n.preType=e}),_defineProperty(this,"appendFunctionToPROGRESS",function(){window.PROGRESS.openPopup=n.openPopup,window.PROGRESS.closePopup=n.closePopup,window.PROGRESS.addList=n.addList,window.PROGRESS.removeList=n.removeList,window.PROGRESS.toggleAllSelectList=n.toggleAllSelectList,window.PROGRESS.allSelectList=n.allSelectList,window.PROGRESS.resetSelectList=n.resetSelectList,window.PROGRESS.sort=n.sort,window.PROGRESS.openAlert=n.openAlert,window.PROGRESS.closeAlert=n.closeAlert}),this.isAllSelected=!1,this.isReverse=!1,this.currentData=[],this.saveClassData=null,this.dateType=y.list.progress.children.date.type.split("-"),this.appendFunctionToPROGRESS(),y&&(l(this.afterCreate),this.alerts=m(),this.setAlerts())}return _createClass(t,[{key:"DATA",get:function(){return v()}},{key:"isSelected",get:function(){return this.currentData.filter(function(e){return e.selected}).length>0}}]),t}();window.PROGRESS.proto=new R})();