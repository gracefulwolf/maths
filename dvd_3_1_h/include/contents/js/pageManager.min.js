"use strict";(function(){function e(){function e(e){var t=document.createElement(e.tag?e.tag:"div");return e.classname&&t.classList.add(e.classname),e.html&&(t.innerHTML=e.html),e.parent?e.parent.appendChild(t):i.appendChild(t),t}function t(e){c.innerHTML=e}function n(e){d.innerHTML=e}var a=setInterval(function(){if(window.$INDEX){clearInterval(a);var e=window.$INDEX.currentIndex.lesson,i=window.$INDEX.currentIndex.corner,o=window.$INDEX.currentIndex.html,r=[];window.$INDEX.DATA.forEach(function(e){var t=[];e.chapters[0].corners.forEach(function(e){var n=[];e.steps.forEach(function(e){e.htmls.forEach(function(e){n.push(e)})}),t.push(n)}),r.push(t)});var s=r[e][i].length;n(s),t(o+1)}},10),i=document.querySelector("header"),o=e({classname:"pageBox"}),r=e({classname:"prev",parent:o}),s=e({classname:"next",parent:o}),l=e({classname:"page",parent:o}),c=e({tag:"span",classname:"current",parent:l}),d=(e({tag:"span",html:"/",parent:l}),e({tag:"span",classname:"current",parent:l})),u=parent.parent.GET_CURRENT_PAGE_NUMBER()[0],p=parent.parent.GET_PAGE_COUNT(),f=u===p,g=u===parent.parent.GET_FIRST_PAGE_NUMBER();f?(o.classList.remove("first"),o.classList.add("last")):g?(o.classList.add("first"),o.classList.remove("last")):(o.classList.remove("first"),o.classList.remove("last")),r.addEventListener("click",function(){parent.parent.GO_PAGE_PREVIOUS()}),s.addEventListener("click",function(){parent.parent.GO_PAGE_NEXT()})}function t(e){var t=e,n={};n.slideClass=e.slideClass?e.slideClass:"on",n.tabClass=e.tabClass?e.tabClass:"on",n.btnClass=e.btnClass?e.btnClass:"off",n.callbacks={move:function(t){v.mediaReset(),"popup"===e.type?console.log("isPopup"):v.popupClose(),window.$callBack.sliderMove&&window.$callBack.sliderMove(t),window.$callBack.sliderReset&&window.$callBack.sliderReset(t),e.type&&"main"===e.type&&v.inPageReset();var n=t.idx+1;w.controller.forEach(function(t){t.autoPlay&&(t.setTimeAutoPlay&&clearTimeout(t.setTimeAutoPlay),e.type&&"main"===e.type&&n==t.playPage&&t.startAutoPlay(300))});var a=$ts.getEl("[data-click-obj]"),i=$ts.getEl("[data-click-target]");a&&a.length>0&&a.forEach(function(e){e.classList.remove("complete")}),i&&i.length>0&&i.forEach(function(e){e.classList.remove("on")});var o=$ts.getEl(".js-supplies");o&&o.length>0&&o.forEach(function(e){e.classList.remove("on")})},reset:function(t){e.callback&&e.callback(t)}},e.carousel&&(n.carousel={wrapper:$ts.getEl(e.carousel.wrapper,t.container,0),loop:{left:"left"===e.carousel.loop,right:"right"===e.carousel.loop},transitionDuration:e.carousel.transitionDuration?e.carousel.transitionDuration:100});var a=new $slider(t,n);"popup"===e.type?w.inPopup.slider.push(a):"main"===e.type?w.mainSlider=a:w.inPage.slider.push(a)}function n(e){var n=e.getAttribute("data-slide-container"),a=e.querySelectorAll('[data-slides="'+n+'"] > li')||null,i=e.querySelectorAll('[data-tabs="'+n+'"] > li')||null,o=e.querySelector('[data-btn-prev="'+n+'"]')||null,r=e.querySelector('[data-btn-next="'+n+'"]')||null,s={};s.type=n,s.container=e,s.slides=a,i&&(s.tabs=i),o&&(s.prevBtn=o),r&&(s.nextBtn=r),t(s)}function a(e,t){var n=$ts.getEl("[data-popup-page]");$ts.getEl("main")[0];for(var a in setTimeout(function(){},200),e){var i=e[a].getAttribute("data-popup-btn"),o=$ts.getEl('[data-popup-page="'+i+'"]')[0],r="hidden"===e[a].getAttribute("data-popup-parent"),s=e[a].hasAttribute("data-popup-mode")?e[a].getAttribute("data-popup-mode"):"pageChange",l=$popup({btn:e[a],page:o,popupPages:n,container:t,idx:i,UIHidden:r,Mode:s,callBack:{open:function(e){e.page.className.indexOf("min")>-1&&e.container.classList.add("on"),"pageChange"===e.Mode&&v.mediaReset(),window.parent.hideViewer&&window.parent.hideViewer(),window.$popupCallBack&&window.$popupCallBack.open&&window.$popupCallBack.open(e)},close:function(e){e.page.hasAttribute("data-popup-inner")||v.inPopupReset(),e.container.classList.remove("on"),"pageChange"===e.Mode&&v.mediaReset(),window.parent.showViewer&&window.parent.showViewer(),window.$popupCallBack&&window.$popupCallBack.close&&window.$popupCallBack.close(e)},reset:function(e){e.page.hasAttribute("data-popup-inner")||v.inPopupReset(),e.UIHidden&&v.mediaReset()}}});w.popup.push(l)}}function i(e){function t(e,t){var n=$scroll(e);w[t].scroll.push(n)}var n={};for(var a in n.inPage=e.page,n.inPopup=e.popup,n)for(var i in n[a]){var o=n[a][i],r=$ts.getEl("[data-scroll-inner]",n[a][i],0),s=$ts.getEl("[data-scroll-content]",n[a][i],0),l=n[a][i].getAttribute("data-scroll-reset"),c=n[a][i].getAttribute("data-scroll-value"),d=n[a][i].getAttribute("data-scroll-container");"all"===d?(t({container:o,inner:r,content:s,reset:l,value:c,type:"vertical"},a),t({container:o,inner:r,content:s,reset:l,value:c,type:"horizon"},a)):t({container:o,inner:r,content:s,reset:l,value:c,type:d},a)}}function o(e){for(var t in e){var n=e[t].getAttribute("data-media-container"),a=$ts.getEl("[data-media-btn]",e[t]),i=e[t].getAttribute("data-media-control"),o=new $controller({container:e[t],mediaType:n,controlType:i,mediaBtns:a,callBack:{play:function(e){for(var t in w.controller)w.controller[t].controller!==e.controller&&w.controller[t].stop();window.$callBack.mediaStart&&window.$callBack.mediaStart(e)},pause:function(e){window.$callBack.mediaPause&&window.$callBack.mediaPause(e)},stop:function(e){window.$callBack.mediaEnd&&window.$callBack.mediaEnd(e)}}});w.controller.push(o)}}function r(e){function t(t){var n=setInterval(function(){0!==w.quiz[e.include].length&&w.quiz[e.include].forEach(function(e){if(e.name===t){clearInterval(n);var i=e;i.chain=a,a.quizArray.push(i)}})},10)}function n(){var e=a.btn.getAttribute("data-quiz-chain");for(var n in e=e.replace(/ /g,"").split(","),e)t(e[n]);a.btn.hasAttribute("data-type")&&"reset"===a.btn.getAttribute("data-type")?a.btn.addEventListener("click",a.reset.bind(a)):a.btn.addEventListener("click",a.toggleBtn.bind(a)),$ts.addHoverEvents(a.btn),a.btn.addEventListener("click",$efSound.click)}var a=this;this.btn=e.btn,this.quizArray=[],this.completeCount=0,this.toggleBtn=function(){this.btn.classList.contains("reset")?this.reset():this.complete()},this.complete=function(){for(var e in this.btn.classList.add("reset"),this.quizArray)this.quizArray[e].showAnswer();window.$callBack.quizChainAnswer&&window.$callBack.quizChainAnswer(this)},this.reset=function(){for(var e in this.btn.classList.remove("reset"),this.quizArray)this.quizArray[e].reset();window.$callBack.quizChainReset&&window.$callBack.quizChainReset(this)},this.checkComplete=function(e){for(var t in this.completeCount=0,this.quizArray)this.quizArray[t].container.classList.contains("complete")&&this.completeCount++;this.completeCount==this.quizArray.length?this.btn.classList.add("reset"):this.btn.classList.remove("reset")},n()}function s(){var t=false,s=false,p=false;s?($ts.loadScriptFile("../../../include/contents/js/indexPopup.min.js",function(){}),document.querySelector("#wrap").classList.add("RUN_testUI")):t?($ts.loadScriptFile("../../../include/contents/js/indexPopup.min.js",function(){e()}),document.querySelector("#wrap").classList.add("RUN_viewer")):p?document.querySelector("#wrap").classList.add("RUN_myClassMaker"):document.querySelector("#wrap").classList.add("RUN_html"),$ts.loadScriptFile("../../../include/contents/js/header.min.js",function(){}),$ts.loadScriptFile("../../../include/libs/js/drag.min.js",function(){if($ts.getEl("[data-drag]")){var e=$ts.getEl("[data-drag]");for(var t in e)new $Drag({dragObj:e[t],callback:window.$callBack.drag})}});var f=$ts.getEl("[data-hover]");if(f)for(var g in f)$ts.addHoverEvents(f[g],"preventDefault");if($ts.getEl("[data-popup-btn]")&&$ts.getEl("[data-popup-container]")&&a($ts.getEl("[data-popup-btn]"),$ts.getEl("[data-popup-container]")[0]),($ts.getEl("[data-scroll-container]")||$ts.getEl("[data-scroll-popup-container]"))&&i({page:$ts.getEl("[data-scroll-container]"),popup:$ts.getEl("[data-scroll-popup-container]")}),$ts.getEl("[data-media-container]")&&o($ts.getEl("[data-media-container]")),$ts.getEl("[data-slide-container]")){var v=$ts.getEl("[data-slide-container]");for(var m in v)n(v[m])}var h=$ts.getEl("main [data-quiz]"),$=$ts.getEl("[data-popup-container] [data-quiz]"),E=$ts.getEl("main [data-quiz-chain]"),b=$ts.getEl("[data-popup-container] [data-quiz-chain]");for(var m in h){var k=h[m].getAttribute("data-quiz");w.quiz.inPage.push($quiz({container:h[m],type:k,include:"inPage"}))}for(var m in $){k=$[m].getAttribute("data-quiz");w.quiz.inPopup.push($quiz({container:$[m],type:k,include:"inPopup"}))}for(var m in E)w.quiz.inPage.push(new r({btn:E[m],include:"inPage"}));for(var m in b)w.quiz.inPopup.push(new r({btn:b[m],include:"inPopup"}));if($ts.getEl("[data-url]")&&$ts.getEl("[data-url]").length>=1){var L=$ts.getEl("[data-url]");for(var m in L)L[m].addEventListener("click",u),L[m].addEventListener("click",$efSound.click)}if($ts.getEl("[data-download-file]")&&$ts.getEl("[data-download-file]").length>=1){L=$ts.getEl("[data-download-file]");for(var m in L)L[m].addEventListener("click",d),L[m].addEventListener("click",$efSound.click)}if($ts.getEl("[data-link]")&&$ts.getEl("[data-link]").length>=1){L=$ts.getEl("[data-link]");L.forEach(function(e){e.addEventListener("click",c.bind(null,{target:e})),e.addEventListener("click",$efSound.click)})}if($ts.getEl("[data-click-obj]")&&$ts.getEl("[data-click-obj]").length>=1){L=$ts.getEl("[data-click-obj]");L.forEach(function(e){e.addEventListener("click",l.bind(null,e)),e.addEventListener("mouseover",function(){e.classList.add("hover")}),e.addEventListener("mouseout",function(){e.classList.remove("hover")}),e.addEventListener("click",$efSound.click)})}}function l(e){var t=e.getAttribute("data-click-obj"),n=$ts.getEl('[data-click-target="'+t+'"');e.classList.contains("complete")?e.classList.remove("complete"):e.classList.add("complete"),n&&n.length>0&&n.forEach(function(e){e.classList.contains("on")?e.classList.remove("on"):e.classList.add("on")})}function c(e){var t,n,a="/viewer/ebook/index.html",i="/viewer/contents/index.html",o="?contentInformationURL=",r="../../resource/",s=e.target.getAttribute("data-type")||"ebook",l=e.target.getAttribute("data-link")-0||1,c=s.indexOf("ebook")>-1,d=0;c?t=a+o+r+s+"/&page="+(l-d)+"&UUID=fcem":(n=e.url||"lesson01/&page="+pageNum,t=i+o+r+s+"/"+n),window.jj?jj.link.html(t,"_top"):alert("JJ api가 없습니다")}function d(){var e=this.getAttribute("data-download-file");window.jj&&window.jj.native.exe?jj.native.exe("/resource/data/ebook/"+e):window.open("../../../../data/ebook/"+e)}function u(){var e=this.getAttribute("data-url");window.open(e)}function p(e){e.container.classList.add("complete"),e.answerBtn&&e.answerBtn.classList.add("reset")}window.$callBack=window.$callBack||{},window.$popupCallBack=window.$popupCallBack||{};var f,g=$ts.ce({tag:"div",class:"loading",parent:document.body});f=setInterval(function(){window.DOMelementsLoaded&&(clearInterval(f),g.classList.add("hide"))},50),$ts.loadScriptFile("../../../include/libs/js/jquery.min.js",function(){console.log("loaded - jquery.js"),$ts.loadScriptFile("../../../include/libs/js/binder_web.min.js",function(){console.log("loaded - binder.js")}),$ts.loadScriptFile("../../../include/libs/js/draw.js",function(){console.log("loaded - draw.js")})}),window.parent==window&&(console.log("[  Run Contents Mode(no UI)  ]"),document.querySelector("html").classList.add("noUI"),$ts.loadScriptFile("../../../include/libs/js/scale.min.js",function(){v.zoomRate=new window.$cale({target:$ts.getEl("#wrap")}).zoomRate,setTimeout(function(){$ts.getEl("#wrap").style.opacity=1},100)})),document.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1}),window.$run=function(e,t){var n=setInterval(function(){""!==e&&void 0===window[e]||(clearInterval(n),t&&t())},10)};var v={},w={inPage:{slider:[],quiz:[],scroll:[]},inPopup:{slider:[],quiz:[],scroll:[]},popup:[],controller:[],singleAudio:[],sync:[],balloon:[],quiz:{inPage:[],inPopup:[]},get controllerLen(){return this.controller.length},get singleAudioLen(){return this.singleAudio.length}};v.inPageReset=function(){for(var e in v.mediaReset(),v.popupClose(),w.inPage)if(w.inPage[e].length)for(var t in w.inPage[e])v.reset(w.inPage[e][t],e);w.quiz.inPage.forEach(function(e){e.reset()})},v.inPopupReset=function(){for(var e in w.inPopup)if(w.inPopup[e].length)for(var t in w.inPopup[e])v.reset(w.inPopup[e][t],e);w.quiz.inPopup.forEach(function(e){e.reset()})},v.reset=function(e,t){switch(t){case"scroll":e.isReset?e.reset():e.getData();break;default:e.reset()}},v.popupClose=function(){if(w.popup.length)for(var e in w.popup)w.popup[e].close()},v.mediaReset=function(){if(w.controllerLen)for(var e in w.controller)w.controller[e].stop();if(w.singleAudioLen)for(var e in w.singleAudio)w.singleAudio[e].stop();if(w.sync.length)for(var e in w.sync)w.sync[e].reset()},function(){function e(e,t){t.load(),window.$efSound[e]=function(){return $ts.createAudio.interval(t.duration,function(){n(),t.play()}),t}}function t(t,n){e(t,$ts.createAudio.set(n))}function n(e){for(var t in a)a[t].pause(),a[t].currentTime&&(a[t].currentTime=0)}window.$efSound={};var a={click:$ts.createAudio.set("../../../include/libs/media/click.mp3"),correct:$ts.createAudio.set("../../../include/libs/media/correct.mp3"),incorrect:$ts.createAudio.set("../../../include/libs/media/incorrect.mp3"),bell:$ts.createAudio.set("../../../include/libs/media/bell.mp3")};for(var i in a)e(i,a[i]);window.$efSound.add=t,window.$efSound.stop=n,window.$efSound.muted=function(e){for(var t in a)a[t].muted=e}}(),window.addEventListener("load",function(){s()}),v.slider=t,v.array=w,v.completeQuizManually=p,window.$pm=v})(),function(){var e,t;if(e=$ts.getEl("[data-tabs]"),e){t=[],e.forEach(function(e){for(var n=0;n<e.children.length;n++)t.push(e.children[n])});for(var n=0;n<t.length;n++)t[n].addEventListener("click",function(e){var t,n,a;t=e.target,n=t.classList.contains("on"),n||(a=t.dataset.appearIndex,a=parseInt(a),a&&(resetAppears(),startAppear("group_"+a)))})}}(),function(){function e(e){e.classList.contains("on")?e.classList.remove("on"):e.classList.add("on")}var t=$ts.getEl(".js-supplies");t&&t.length>0&&t.forEach(function(t){var n=t.querySelector(".js-suppliesButton"),a=t.querySelector(".js-suppliesContent");n&&a&&(n.addEventListener("click",$efSound.click),n.addEventListener("click",e.bind(null,t)),n.addEventListener("mouseover",function(){n.classList.add("hover")}),n.addEventListener("mouseout",function(){n.classList.remove("hover")}))})}(),$ts.loadScriptFile("../../../include/libs/js/platform-detect_3.0.1.min.js",function(){function e(e){document.body.setAttribute("data-"+e.key,e.value)}var t=window["platform-detect"];console.log("loadScriptFile : /include/libs/js/platform-detect_3.0.1.min.js",t),t.android&&e({key:"os",value:"android"}),t.ios&&e({key:"os",value:"ios"}),t.macos&&e({key:"os",value:"macos"}),t.windows&&e({key:"os",value:"windows"}),t.chrome&&e({key:"browser",value:"chrome"}),t.edge&&e({key:"browser",value:"edge"}),t.firefox&&e({key:"browser",value:"firefox"}),t.ie&&e({key:"browser",value:"ie"}),t.safari&&e({key:"browser",value:"safari"})}),window.addEventListener("load",function(){window.DOMelementsLoaded=!0});