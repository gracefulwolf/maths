"use strict";function switchStringNumListToArray(t,e){return t.replace("/ /g","").split(e).map(function(t){return parseInt(t)})}(function(){function t(t){return new e(t)}function e(t){var n,s=this;this.container=t.container,this.type=t.type,this.include=t.include,this.parent="inPage"===t.include?$ts.getEl("main",document,0):$ts.getEl("popup",document,0),this.name=this.container.getAttribute("data-quiz-name"),this.option=t.container.hasAttribute("data-option"),this.answerBtn=$ts.getEl("[data-answer-btn]",t.container,0),this.solveBtn=$ts.getEl("[data-solve-btn]",t.container,0),this.showTargetsAfterAnswer=$ts.getEl('[data-after-target="'+(this.name||this.type)+'"]',t.container),this.customCompleteCount=this.container.dataset.customCompleteCount?parseInt(this.container.dataset.customCompleteCount):null;var i=function(){window.$run("$"+s.type,function(){switch(s.type){case"toggle":n=$toggle(s);break;case"check":n=$check(s);break;case"input":n=$input(s);break;case"ox":n=$ox(s);break;case"dragDrop":n=new $dragDrop(s),n.init(e);break;case"dragLine":n=new $dragLine(s),n.init(e)}s.quiz=n})};this.toggleAnswerBtn=function(){this.answerBtn.classList.contains("reset")?this.reset():this.showAnswer()},this.checkComplete=function(t){n.totalCompleteCount===n.completeCount?(this.container.classList.add("complete"),this.answerBtn&&this.answerBtn.classList.add("reset"),t&&t.complete&&t.complete(s)):(this.container.classList.remove("complete"),this.answerBtn&&this.answerBtn.classList.remove("reset"),t&&t.reset&&t.reset(s)),this.chain&&this.chain.checkComplete(this)},this.showAnswer=function(){n.showAnswer(),this.answerBtn&&this.answerBtn.classList.add("reset"),this.solveBtn&&this.solveBtn.classList.add("on"),this.showTargetsAfterAnswer&&this.showTargetsAfterAnswer.length>0&&this.showTargetsAfterAnswer.forEach(function(t){t.classList.add("on")})},this.reset=function(){n.reset(),this.answerBtn&&this.answerBtn.classList.remove("reset"),this.solveBtn&&this.solveBtn.classList.remove("on"),this.showTargetsAfterAnswer&&this.showTargetsAfterAnswer.length>0&&this.showTargetsAfterAnswer.forEach(function(t){t.classList.remove("on")})},this.getIndex=function(t){return t.obj.getAttribute("data-"+t.type+"-obj")},this.getTarget=function(t){var e=[];for(var n in t.target)t.target[n].getAttribute("data-"+t.type+"-target")==t.index&&e.push(t.target[n]);return e};var o=function(){if(i(),s.answerBtn&&(s.answerBtn.hasAttribute("data-type")&&"reset"===s.answerBtn.getAttribute("data-type")?s.answerBtn.addEventListener("click",s.reset.bind(s)):s.answerBtn.addEventListener("click",s.toggleAnswerBtn.bind(s)),$ts.addHoverEvents(s.answerBtn),s.answerBtn.addEventListener("click",$efSound.click)),s.option){s.option={};var t=s.container.getAttribute("data-option").replace(/ /g,"");for(var e in t=t.split(","),t)s.option[t[e]]=!0}};o()}$ts.loadScriptFile("../../../include/libs/js/dragdropCore.min.js"),$ts.loadScriptFile("../../../include/contents/js/quiz/dragDrop.min.js"),$ts.loadScriptFile("../../../include/contents/js/quiz/dragLine.min.js"),window.$quiz=t})(),function(){function t(t){return new e(t)}function e(t){function e(){for(var e in i.obj){var s=t.getIndex({obj:i.obj[e],type:"toggle"}),o=t.getTarget({index:s,type:"toggle",target:i.target});i.obj[e].addEventListener("click",n.bind(i,i.obj[e],o)),$ts.addHoverEvents(i.obj[e]),i.obj[e].addEventListener("click",$efSound.click)}}function n(e,n){if(e.classList.contains("complete"))t.option.toggle&&(s(e),window.$callBack&&window.$callBack.toggleBack&&window.$callBack.toggleBack({quiz:i,curObj:e,curTarget:n}));else{for(var o in i.completeCount++,e.classList.add("complete"),n)n[o].classList.add("on");window.$callBack&&window.$callBack.toggleClick&&window.$callBack.toggleClick({quiz:i,curObj:e,curTarget:n})}t.checkComplete()}function s(e){var n=t.getIndex({obj:e,type:"toggle"}),o=t.getTarget({index:n,type:"toggle",target:i.target});for(var a in i.completeCount--,e.classList.remove("complete"),o)o[a].classList.remove("on"),o[a].classList.contains("complete")&&s(o[a])}var i=this;this.container=t.container,this.obj=$ts.getEl("[data-"+t.type+"-obj]",this.container),this.target=$ts.getEl("[data-"+t.type+"-target]",this.container),this.totalCompleteCount=t.customCompleteCount||this.obj.length,this.completeCount=0,this.showAnswer=function(){for(var t in this.completeCount=this.totalCompleteCount,this.container.classList.add("complete"),this.obj)this.obj[t].classList.add("complete");for(var t in this.target)this.target[t].classList.add("on");window.$callBack&&window.$callBack.toggleAnswer&&window.$callBack.toggleAnswer(i)},this.reset=function(){for(var e in this.completeCount=0,this.container.classList.remove("complete"),this.obj)this.obj[e].classList.remove("complete");for(var e in this.target)this.target[e].classList.remove("on");t.answerBtn&&t.answerBtn.classList.remove("reset"),window.$callBack&&window.$callBack.toggleReset&&window.$callBack.toggleReset(i)},e()}window.$toggle=t}(),function(){function t(t){return new e(t)}function e(t){function e(){for(var e in c.obj){var i=t.getIndex({obj:c.obj[e],type:"check"}),o=t.getTarget({index:i,type:"check",target:c.target});1===c.totalCompleteCount?c.obj[e].addEventListener("click",n.bind(this,c.obj[e],o)):c.obj[e].addEventListener("click",s.bind(this,c.obj[e],o)),$ts.addHoverEvents(c.obj[e]),c.obj[e].addEventListener("click",$efSound.click)}}function n(e,n){if(c.reset(),e.hasAttribute("data-answer"))for(var s in c.completeCount++,n)n[s].classList.add("on");else for(var s in n)n[s].classList.add("on");window.$callBack&&window.$callBack.checkClick&&window.$callBack.checkClick({quiz:c,curObj:e,curTarget:n}),t.checkComplete({complete:o,reset:a})}function s(e,n){if(e.classList.contains("checked"))i(e);else if(e.classList.contains("complete"))i(e);else{for(var s in e.hasAttribute("data-answer")&&c.completeCount++,e.classList.add("checked"),n)n[s].classList.add("on");window.$callBack&&window.$callBack.checkClick&&window.$callBack.checkClick({quiz:c,curObj:e,curTarget:n})}t.checkComplete({complete:o,reset:a})}function i(e){var n=t.getIndex({obj:e,type:"check"}),s=t.getTarget({index:n,type:"check",target:c.target});for(var o in e.hasAttribute("data-answer")&&c.completeCount--,e.classList.contains("complete")&&e.classList.remove("complete"),e.classList.remove("checked"),s)s[o].classList.remove("on"),s[o].classList.contains("checked")&&i(s[o])}function o(){for(var t in c.obj)c.obj[t].hasAttribute("data-answer")&&(c.obj[t].classList.add("checked"),c.obj[t].classList.add("complete"))}function a(){for(var t in c.obj)c.obj[t].hasAttribute("data-answer")&&c.obj[t].classList.remove("complete")}var c=this;this.container=t.container,this.obj=$ts.getEl("[data-"+t.type+"-obj]",this.container),this.target=$ts.getEl("[data-"+t.type+"-target]",this.container),this.totalCompleteCount=$ts.getEl("[data-answer]",this.container).length,this.completeCount=0,this.showAnswer=function(){this.completeCount=this.totalCompleteCount,this.container.classList.add("complete");var e=[];for(var n in this.obj)if(this.obj[n].hasAttribute("data-answer")){var s=t.getIndex({obj:c.obj[n],type:"check"}),i=t.getTarget({index:s,type:"check",target:c.target});for(var o in this.obj[n].classList.add("complete"),this.obj[n].classList.add("checked"),i)e.push(i[o])}for(var n in e)e[n].classList.add("on");window.$callBack&&window.$callBack.checkAnswer&&window.$callBack.checkAnswer(c)},this.reset=function(){for(var t in this.completeCount=0,this.container.classList.remove("complete"),this.obj)this.obj[t].classList.remove("complete"),this.obj[t].classList.remove("checked");for(var t in this.target)this.target[t].classList.remove("on");window.$callBack&&window.$callBack.checkReset&&window.$callBack.checkReset(c)},e()}window.$check=t}(),function(){function t(t){return new e(t)}function e(t){function e(){n.obj.forEach(function(t){var e=t.hasAttribute("placeholder");e&&(t.setAttribute("onfocus","placeholder=''"),t.setAttribute("onblur","placeholder='직접 써 보세요.'")),t.setAttribute("autocomplete","off"),t.addEventListener("focus",function(){this.classList.add("onFocus")}),t.addEventListener("blur",function(){this.classList.remove("onFocus"),""!==t.value?this.classList.add("offBg"):this.classList.remove("offBg")})})}var n=this;this.container=t.container,this.obj=$ts.getEl("[data-"+t.type+"-obj]",this.container),this.showAnswer=function(){this.obj.forEach(function(t){var e=t.getAttribute("data-answer");e&&(t.value=e,t.classList.add("answerMode"),t.setAttribute("readonly",""))}),window.$callBack&&window.$callBack.inputAnswer&&window.$callBack.inputAnswer(n)},this.reset=function(){this.obj.forEach(function(t){var e=t.getAttribute("data-answer");t.value="",e&&(t.classList.remove("answerMode"),t.removeAttribute("readonly",""),t.classList.remove("onFocus"),t.classList.remove("offBg"))}),window.$callBack&&window.$callBack.inputReset&&window.$callBack.inputReset(n)},e()}window.$input=t}(),function(){function t(t){return new e(t)}function e(t){function e(){for(var e in i.obj){var s=t.getIndex({obj:i.obj[e],type:"ox"}),o=t.getTarget({index:s,type:"ox",target:i.target});i.obj[e].addEventListener("click",n.bind(this,i.obj[e],o)),$ts.addHoverEvents(i.obj[e]),t.option&&t.option.answerSound||i.obj[e].addEventListener("click",$efSound.click)}}function n(e,n){if(1===i.totalCompleteCount&&i.reset(),e.hasAttribute("data-answer")&&!e.classList.contains("complete")){for(var o in i.completeCount++,e.classList.add("complete"),n)n[o].classList.add("on");t.option&&t.option.answerSound&&$efSound.correct(),window.$callBack&&window.$callBack.oxCorrect&&window.$callBack.oxCorrect({quiz:i,curObj:e,curTarget:n})}else{for(var o in n)n[o].classList.add("on"),t.option&&t.option.hide&&s(n[o]);t.option&&t.option.answerSound&&window.$efSound.incorrect(),window.$callBack&&window.$callBack.oxIncorrect&&window.$callBack.oxIncorrect({quiz:i,curObj:e,curTarget:n})}t.checkComplete()}function s(t){setTimeout(function(){t.classList.remove("on")},500)}var i=this;this.container=t.container,this.obj=$ts.getEl("[data-"+t.type+"-obj]",this.container),this.target=$ts.getEl("[data-"+t.type+"-target]",this.container),this.totalCompleteCount=$ts.getEl("[data-answer]",this.container).length,this.completeCount=0,this.showAnswer=function(){this.completeCount=this.totalCompleteCount,this.container.classList.add("complete");var e=[];for(var n in this.obj)if(this.obj[n].hasAttribute("data-answer")){var s=t.getIndex({obj:this.obj[n],type:"ox"}),o=t.getTarget({index:s,type:"ox",target:this.target});for(var a in this.obj[n].classList.add("complete"),o)e.push(o[a])}for(var n in e)e[n].classList.add("on");window.$callBack&&window.$callBack.oxAnswer&&window.$callBack.oxAnswer(i)},this.reset=function(){for(var t in this.completeCount=0,this.container.classList.remove("complete"),this.obj)this.obj[t].classList.remove("complete");for(var t in this.target)this.target[t].classList.remove("on");window.$callBack&&window.$callBack.oxReset&&window.$callBack.oxReset(i)},e()}window.$ox=t}(),function(){function t(t){return new e(t)}function e(t){this.answers=[],this.dots=[],this.btns=[],this.svg=void 0,this.lines=[],Object.defineProperties(this,{len_dots:{get:function(){return this.dots.length}},len_answers:{get:function(){return this.answers.length}},allAnswered:{get:function(){return this.lines.every(function(t){return"complete"===t.getAttribute("data-complete")})}}}),this.initiate=function(){this.setAnswers(),this.setDots(),this.setBtns(),this.setSvg()},this.setAnswers=function(){var e,n;e=t.container.dataset.drawLineAnswers,e=e.split(" "),e.forEach(function(t){var e=[];n||(n=[]),e=t.split(","),e=e.map(function(t){return parseInt(t)}),n.push(e)}),this.answers=n},this.setDots=function(){this.dots=$ts.getEl("[data-draw-line-dot]"),this.dots.forEach(function(t){t.dotIndex=parseInt(t.dataset.drawLineDot)})},this.setBtns=function(){var e=this;this.btns=$ts.getEl("[data-draw-line-btn]"),this.btns.forEach(function(n){n.answerIndex=parseInt(n.dataset.drawLineBtn),n.addEventListener("click",function(n){var s,i;for(s=n.target;!s.hasAttribute("data-draw-line-btn");)s=s.parentElement;s.dataset.complete||(i=e.answers[s.answerIndex-1],e.answers[s.answerIndex-1].answered=!0,e.drawLine(i),e.completeBtn(s),e.allAnswered&&t.toggleAnswerBtn())},!1),n.addEventListener("click",$efSound.click)})},this.setSvg=function(){var e,n,s;e=document.createElementNS("http://www.w3.org/2000/svg","g"),e.style.stroke="#e25050",e.style.strokeWidth=3;for(var i=0;i<this.len_answers;i++)n=document.createElementNS("http://www.w3.org/2000/svg","line"),e.appendChild(n),this.lines.push(n);s=document.createElementNS("http://www.w3.org/2000/svg","svg"),s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style.width="100%",s.style.height="100%",s.style.pointerEvents="none",t.container.insertBefore(s,t.container.children[0]),s.appendChild(e)},this.drawLine=function(t){var e,n,s,i;e=this,n=[],t.forEach(function(t){n.push(e.findDot(t))}),s=n.map(function(t){return e.getDotPosition(t)}),this.lines.forEach(function(t){i||"complete"!==t.getAttribute("data-complete")&&(t.setAttribute("x1",s[0].x),t.setAttribute("x2",s[1].x),t.setAttribute("y1",s[0].y),t.setAttribute("y2",s[1].y),t.setAttribute("data-complete","complete"),i=!0)})},this.findDot=function(t){for(var e=0;e<this.len_dots;e++)if(t===this.dots[e].dotIndex)return this.dots[e]},this.getDotPosition=function(e){var n,s;return n=$ts.getSize(e),s=$ts.getSize(t.container),{x:n.left-s.left+n.width/2,y:n.top-s.top+n.width/2}},this.drawLines=function(){var t=this;this.answers.forEach(function(e){e.answered||(t.drawLine(e),e.answered=!0)})},this.resetLine=function(t){t.setAttribute("x1","0"),t.setAttribute("x2","0"),t.setAttribute("y1","0"),t.setAttribute("y2","0"),t.setAttribute("data-complete","")},this.resetLines=function(){var t=this;this.lines.forEach(function(e){t.resetLine(e)})},this.completeBtn=function(t){t.classList.add("complete"),t.dataset.complete="complete",t.style.pointerEvents="none"},this.completeBtns=function(){var t=this;this.btns.forEach(function(e){t.completeBtn(e)})},this.resetBtn=function(t){t.classList.remove("complete"),t.dataset.complete="",t.style.pointerEvents="auto"},this.resetBtns=function(){var t=this;this.btns.forEach(function(e){t.resetBtn(e)})},this.checkAllAnswered=function(){return this.lines.every(function(t){return"complete"===t.dataset.complete})},this.showAnswer=function(){this.completeBtns(),this.drawLines()},this.reset=function(){this.resetBtns(),this.resetLines(),this.answers.forEach(function(t){t.answered=!1})},this.initiate()}window.$drawline=t,window.$selectCorrectQuiz=function(){function t(t){function e(t){return t.classList.contains("js-correct")}function n(t){var n=t.target;e(n)?i():o()}function s(t){a.forEach(function(n){e(n)&&n.classList[t?"add":"remove"]("on")})}function i(){window.$efSound.correct(),s(!0)}function o(){window.$efSound.incorrect(),s(!1)}var a=window.$ts.getEl(".js-select",t);return a.forEach(function(t){t.addEventListener("click",n)}),{reset:function(){s(!1)}}}var e=window.$ts.getEl(".js-selectCorrectQuiz");if(!e.length)return{resetAll:function(){}};var n=e.map(t);return{resetAll:function(){n.forEach(function(t){t.reset()})}}}(),window.$oxSelectQuiz=function(){function t(t){s(t,!0)}function e(t){s(t,!1)}function n(t){t.forEach(e)}function s(t,e){t.classList[e?"add":"remove"]("on")}function i(t){return window.$ts.getEl(".js-select",t)}function o(e){var s=i(e);s.forEach(function(e){e.addEventListener("click",function(e){var i=e.target;n(s),t(i,!0)})})}var a=window.$ts.getEl(".js-oxSelect");return a.length?(a.forEach(o),{resetAll:function(){a.map(i).forEach(function(t){n(t)})}}):{resetAll:function(){}}}()}();