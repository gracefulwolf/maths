function DragObj(t,e){this.dragElement=t,this.DragDrop=e,Object.defineProperties(this,{size:{get:function(){return this.dragElement.getBoundingClientRect()}},styles:{get:function(){var t=window.getComputedStyle(this.dragElement);return{position:t.position,left:parseInt(t.left),top:parseInt(t.top),width:parseInt(t.width),height:parseInt(t.height)}}},initStyles:{set:function(t){this._initStyles=t},get:function(){return this._initStyles}},dragElementStartCoordinates:{set:function(t){this._dragElementStartCoordinates=t},get:function(){return this._dragElementStartCoordinates}},disabled:{get:function(){return"complete"===this.dragElement.dataset.dragElement}},answers:{get:function(){var t;return t=this.dragElement.dataset.dragDropAnswer,t.includes(",")&&(t=t.split(","),t=t.map(function(t){return t.trim()})),t}}}),this.disable=function(){this.dragElement.dataset.dragElement="complete"},this.able=function(){this.dragElement.dataset.dragElement=""},this.classOn=function(){this.dragElement.style.position="",this.dragElement.style.left="",this.dragElement.style.top="",this.dragElement.classList.add("dragComplete")},this.classOff=function(){this.dragElement.classList.remove("dragComplete")},this.reset=function(){this.dragElement.style.position=this.initStyles.position,this.dragElement.style.left=this.initStyles.left+"px",this.dragElement.style.top=this.initStyles.top+"px",this.classOff(),this.able()},this.dragObjAnswer=function(){var t,e,n,i,s,r,a,o,h;t=this.answers,e=t.length,i=this.DragDrop.areaObjs,s=this.DragDrop.areaObjsLen;for(var l=0;l<s;l++){r=i[l],a=r.answers,h=a.length;for(var d=0;d<h;d++){o=a[d];for(var c=0;c<e;c++)n=t[c],n===o&&(this.DragDrop.opts.class?this.classOn():(this.dragElement.style.position="absolute",this.dragPositioning(r)),this.disable())}}},this.checkDownEventIsOn=function(t){var e;return e=this.size.left<t.x&&t.x<this.size.left+this.size.width&&this.size.top<t.y&&t.y<this.size.top+this.size.height,e},this.dragStart=function(t){this.dragElement.style.position="absolute",this.dragPositioning(t)},this.dragPositioning=function(t){console.log(t.constructor.name),"DropAreaObj"===t.constructor.name?(this.dragElement.style.left=t.dropSize.x+"px",this.dragElement.style.top=t.dropSize.y+"px"):(this.dragElement.style.left=this.dragElementStartCoordinates.x+(t.x-this.DragDrop.eventStartCoordinates.x)+"px",this.dragElement.style.top=this.dragElementStartCoordinates.y+(t.y-this.DragDrop.eventStartCoordinates.y)+"px")},this.dragObjEnd=function(t){var e,n;e=this.DragDrop.areaObjNow,n=this.DragDrop.isCorrect,e?this.DragDrop.opts.answer&&!n?this.dragPositioning(this.DragDrop.eventStartCoordinates):(this.DragDrop.opts.class?this.classOn():this.dragPositioning(e),this.DragDrop.opts.disableArea&&e.disable(),this.disable()):this.dragPositioning(this.DragDrop.eventStartCoordinates),this.DragDrop.endCallback&&this.DragDrop.endCallback({dragObj:this.DragDrop.dragObjNow,areaObj:e,isCorrect:n})}}function DropAreaObj(t,e){this.areaElement=t,this.DragDrop=e,Object.defineProperties(this,{size:{get:function(){return this.areaElement.getBoundingClientRect()}},styles:{get:function(){var t=window.getComputedStyle(this.areaElement);return{left:parseInt(t.left),top:parseInt(t.top),width:parseInt(t.width),height:parseInt(t.height)}}},dropSize:{get:function(){return{x:this.styles.left,y:this.styles.top}}},answers:{get:function(){var t;return t=this.areaElement.dataset.dragDropAnswer,t.includes(",")&&(t=t.split(","),t=t.map(function(t){return t.trim()})),t}},disabled:{get:function(){return"complete"===this.areaElement.dataset.dropAreaElement}}}),this.checkUpEventIsOn=function(t){var e;return e=this.size.left<t.x&&t.x<this.size.left+this.size.width&&this.size.top<t.y&&t.y<this.size.top+this.size.height,e},this.disable=function(){this.areaElement.dataset.dropAreaElement="complete"},this.able=function(){this.areaElement.dataset.dropAreaElement=""},this.reset=function(){this.able()}}var DragDrop=function(t){this.containerElement=t.containerElement,this.containerElement.self=this,this.dragElements=t.dragElements,this.areaElements=t.dropAreaElements,this.dragObjs=[],this.areaObjs=[],this.moveEventIsOutCorrection=10,this.opts={answer:!1,class:!1,disableArea:!1},Object.defineProperties(this,{dragObjsLen:{get:function(){return this.dragObjs.length}},areaObjsLen:{get:function(){return this.areaObjs.length}},containerSize:{get:function(){return this.containerElement.getBoundingClientRect()}},eventStartCoordinates:{set:function(t){this._eventStartCoordinates=t},get:function(){return this._eventStartCoordinates}},dragObjNow:{set:function(t){this._dragObjNow=t},get:function(){return this._dragObjNow}},areaObjNow:{set:function(t){this._areaObjNow=t},get:function(){return this._areaObjNow}},isCorrect:{get:function(){if(!this.opts.answer)return!0;var t,e,n,i,s,r;if(!this.dragObjNow||!this.areaObjNow)return!1;t=this.dragObjNow.answers,e=t.length,n=this.areaObjNow.answers,i=n.length;for(var a=0;a<i;a++){s=n[a];for(var o=0;o<e;o++)if(r=t[o],s===r)return!0}}}}),this.initialize=function(){this.createDragObjs(),this.createAreaObjs(),this.addDownEventHandler(),this.setOptions()},this.createDragObjs=function(){var t;t=this.dragElements.length;for(var e=0;e<t;e++){var n,i;n=this.dragElements[e],i=new DragObj(n,this),i.initStyles=i.styles,this.dragObjs.push(i)}},this.createAreaObjs=function(){var t;t=this.areaElements.length;for(var e=0;e<t;e++){var n,i;n=this.areaElements[e],i=new DropAreaObj(n,this),this.areaObjs.push(i)}},this.answerAll=function(){for(var t=0;t<this.dragObjsLen;t++){var e;e=this.dragObjs[t],e.dragObjAnswer()}for(t=0;t<this.areaObjsLen;t++){var n;n=this.areaObjs[t],n.disable()}},this.resetAll=function(){for(var t=0;t<this.dragObjsLen;t++){var e;e=this.dragObjs[t],e.reset()}for(t=0;t<this.areaObjsLen;t++){var n;n=this.areaObjs[t],n.reset()}},this.setOptions=function(){if(this.containerElement.hasAttribute("data-drag-drop-option")){var t,e;t=this.containerElement.dataset.dragDropOption,t=t.split(","),t=t.map(function(t){return t.trim()}),e=t.length;for(var n=0;n<e;n++){var i=t[n];this.opts[i]=!0}console.log("DragDrop options:\n",this.opts)}},this.addDownEventHandler=function(){console.warn(this.containerElement),this.containerElement.addEventListener("mousedown",this.downEventHandler,!1),this.containerElement.addEventListener("touchstart",this.downEventHandler,!1)},this.removeDownEventHandler=function(){this.containerElement.removeEventListener("mousedown",this.downEventHandler,!1),this.containerElement.removeEventListener("touchstart",this.downEventHandler,!1)},this.downEventHandler=function(t){var e,n,i;if(e=!!t.touches,e){if("mousedown"===t.type)return;n={x:t.touches[0].clientX,y:t.touches[0].clientY}}else{if("touchstart"===t.type)return;n={x:t.clientX,y:t.clientY}}i=this.self,i.checkDownEventIsOnDragElement(n)},this.checkDownEventIsOnDragElement=function(t){t:for(var e=0;e<this.dragObjsLen;e++){var n,i;if(n=this.dragObjs[e],i=n.checkDownEventIsOn(t),i){this.dragStart(n,t);break t}}},this.dragStart=function(t,e){t.disabled||(this.dragObjNow=t,this.eventStartCoordinates=e,t.dragElementStartCoordinates={x:t.styles.left,y:t.styles.top},t.dragStart(e),this.addMoveEventHandler(),this.addUpEventHandler(),this.removeDownEventHandler())},this.addMoveEventHandler=function(){this.containerElement.addEventListener("mousemove",this.moveEventHandler,!1),this.containerElement.addEventListener("touchmove",this.moveEventHandler,!1)},this.removeMoveEventHandler=function(){this.containerElement.removeEventListener("mousemove",this.moveEventHandler,!1),this.containerElement.removeEventListener("touchmove",this.moveEventHandler,!1)},this.moveEventHandler=function(t){var e,n,i,s;if(e=!!t.touches,e){if("mousemove"===t.type)return;n={x:t.touches[0].clientX,y:t.touches[0].clientY}}else{if("touchmove"===t.type)return;n={x:t.clientX,y:t.clientY}}i=this.self,i.dragObjNow.dragPositioning(n),s=i.checkMoveEventIsOut(n),s&&i.dragDropEnd(n)},this.checkMoveEventIsOut=function(t){var e=t.x<this.containerSize.left+this.moveEventIsOutCorrection||this.containerSize.left+this.containerSize.width<t.x+this.moveEventIsOutCorrection||t.y<this.containerSize.top+this.moveEventIsOutCorrection||this.containerSize.top+this.containerSize.height<t.y+this.moveEventIsOutCorrection;return e},this.addUpEventHandler=function(){this.containerElement.addEventListener("mouseup",this.upEventHandler,!1),this.containerElement.addEventListener("touchend",this.upEventHandler,!1)},this.removeUpEventHandler=function(){this.containerElement.removeEventListener("mouseup",this.upEventHandler,!1),this.containerElement.removeEventListener("touchend",this.upEventHandler,!1)},this.upEventHandler=function(t){var e,n,i;if(e=!!t.touches,e){if("mouseup"===t.type)return;n={x:t.touches[0].clientX,y:t.touches[0].clientY}}else{if("touchend"===t.type)return;n={x:t.clientX,y:t.clientY}}i=this.self,i.dragDropEnd(n)},this.dragDropEnd=function(t){var e,n;e=this.checkUpEventIsOnAreaElement(t).bool,n=this.checkUpEventIsOnAreaElement(t).obj,e&&(this.areaObjNow=n),this.dragObjNow.dragObjEnd(t),this.removeMoveEventHandler(),this.removeUpEventHandler(),this.addDownEventHandler(),this.dragObjNow=null,this.areaObjNow=null},this.checkUpEventIsOnAreaElement=function(t){t:for(var e=0;e<this.areaObjsLen;e++){var n,i;if(n=this.areaObjs[e],i=n.checkUpEventIsOn(t),i&&!n.disabled)return{bool:!0,obj:n}}return{bool:!1,obj:null}}};String.prototype.includes||(String.prototype.includes=function(t,e){"use strict";return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)});