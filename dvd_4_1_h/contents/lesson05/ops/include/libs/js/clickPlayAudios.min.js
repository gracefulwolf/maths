(function(){function t(t,e,n){function a(t,e){var n,a=t.length;e=e||0;if(0!==a){for(var i=0;i<a;i++)n=t[i],n?(n.audioTextIndex||(n.audioTextIndex=i+e),p.push(n)):p.push(null);return this}}function i(t,e){var n;n=t.length,e=e||0;for(var a=0;a<n;a++)o(t[a],a,e);return this}function o(t,e,n){var a=document.createElement("audio");a.audioIndex||(a.audioIndex=e+n),a.tempSrc=t,f.push(a)}function d(t){return p[t]}function l(){return p}function s(t){return f[t]}function c(){return f}function r(){return h}function u(t,e){h[t]=e}function g(t){h.activated.push(t)}function v(t,e){var n=p.length;a(t,n),i(e,n),this.addEventsToTargets(t,n),this.addEventsToSounds(f.slice(n,f.length),n)}t||console.error("clickPlayAudio: no targets"),e||console.error("clickPlayAudio: no audio srcs");var p=[],f=[],h={blockSound:void 0,targetClick:void 0,playing:void 0,pause:void 0,ended:void 0,btnClick:void 0,activated:[]};n=n||null;a(t),i(e),this.getTarget=d,this.getTargetArray=l,this.getAudio=s,this.getAudioArray=c,this.getCallbacks=r,this.setCallbacks=u,this.activateCallback=g,this.adding=v,this.btn=n,this.addEventsToTargets(p),this.addEventsToSounds(f),this.btn&&this.addEventToBtn(n)}t.prototype.addEventsToTargets=function(t){var e=this;this.btn||t.forEach(function(t,n){t.addEventListener("click",function(t){var n,a;for(n=t.target;!n.audioTextIndex&&0!==n.audioTextIndex;)n=n.parentElement;a=n.audioTextIndex,e.getCallbacks()&&e.getCallbacks().blockSound&&e.getCallbacks().blockSound(t,e,a)||(e.getCallbacks()&&e.getCallbacks().targetClick&&e.getCallbacks().targetClick(t,e,a),e.stopAll(),e.playAudio(a))},!0)})},t.prototype.addEventsToSounds=function(t){var e=this;t.forEach(function(t,n){n=t.audioIndex;t.addEventListener("playing",function(t){e.getCallbacks().playing&&e.getCallbacks().playing(t,e,n)}),t.addEventListener("pause",function(t){e.getCallbacks().pause&&e.getCallbacks().pause(t,e,n)}),t.addEventListener("ended",function(t){e.getCallbacks().ended&&e.getCallbacks().ended(t,e,n)})})},t.prototype.addCallbacks=function(t){for(var e in this.getCallbacks())t.hasOwnProperty(e)&&(this.getCallbacks().activated.some(function(t){return t===e})||(this.getCallbacks()[e]=t[e],this.activateCallback(e)))},t.prototype.stopAll=function(){this.getAudioArray().forEach(function(t){t.paused||t.pause(),t.currentTime&&(t.currentTime=0)})},t.prototype.playAudio=function(t){var e=this.getAudio(t);if(e.src)e.play();else{function n(){e.removeEventListener("loadeddata",n),e.load(),e.play()}e.addEventListener("loadeddata",n),e.src=e.tempSrc}},t.prototype.addEventToBtn=function(t){var e=this;t.addEventListener("click",function(){e.getCallbacks()&&e.getCallbacks().btnClick&&e.getCallbacks().btnClick(event,e),e.stopAll(),e.playAudio(0)})},"undefined"!=typeof module&&void 0!==module.exports?module.exports=t:window.$clickPlayAudios=t})();