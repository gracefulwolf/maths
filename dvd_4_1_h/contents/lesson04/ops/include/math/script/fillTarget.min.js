(function(){function t(t){function e(){s.targets.forEach(function(t){t.classList.remove(u)})}function n(){for(var t=[],e=0;e<s.length;e++){var n=document.createElement("div");n.classList.add("target"),n.setAttribute(c,e),n.addEventListener("click",r),n.addEventListener("click",$efSound.click),s.container.appendChild(n),t.push(n)}return t}function a(t){for(var e=[],n=0;n<=t;n++)s.container.querySelector('.target[index="'+n+'"]').classList.add(d),e.push(s.container.querySelector('.target[index="'+n+'"]'));s.container.querySelector('.target[index="'+t+'"]').classList.add(u),window.$callBack&&window.$callBack.filledTarget&&window.$callBack.filledTarget(s,e)}function i(t,e){var n=[],a=0==e,i=1===s.container.querySelectorAll(".fill").length;s.container.querySelector('.target[index="'+e+'"]').classList.add(u),i&&a&&(t.classList.remove(d),t.classList.remove(u),n.push(t));for(var r=e-0;r<s.length;r++){var c=s.container.querySelector('.target[index="'+(r+1)+'"]');c&&c.classList.remove(d),n.push(c)}window.$callBack&&window.$callBack.toggleTarget&&window.$callBack.toggleTarget(s,n)}function r(){var t=this.getAttribute(c);e(),this.classList.contains(d)?i(this,t):a(t)}var s=this,c="index",l="data-length",o="data-answer",d="fill",u="last";this.container=t.container,this.answerButton=t.answerButton,this.length=this.container.getAttribute(l),this.answer=this.container.getAttribute(o),this.targets=n();var g=!1;this.fillReset=function(){g=!1,s.container.classList.remove("complete"),s.targets.forEach(function(t){t.classList.remove(d),t.classList.remove(u)})},this.fillAnswer=function(){s.fillReset(),g=!0,s.container.classList.add("complete");for(var t=0;t<s.answer;t++)s.container.querySelector('.target[index="'+t+'"]').classList.add(d);s.container.querySelector('.target[index="'+(s.answer-1)+'"]')&&s.container.querySelector('.target[index="'+(s.answer-1)+'"]').classList.add(u)},s.answerButton.addEventListener("click",function(){g?s.fillReset():s.fillAnswer()})}window.FillTarget=t})();