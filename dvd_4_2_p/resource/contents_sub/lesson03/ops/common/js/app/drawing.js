!function(t){"use strict";function e(e,n){return this.each(function(){var i=t(this),o=i.data("ui.drawingTool"),a=t.extend({},s.DEFAULT,"object"==typeof e&&e);o||i.data("ui.drawingTool",o=new s(i,a)),"string"==typeof e&&o[e](n),i.data("instance",o)})}var s=s||function(){function e(){function e(t){return"hide"==t?void s.element.removeClass("open"):void(s.element.hasClass("open")?s.element.removeClass("open"):s.element.addClass("open"))}var s=this;this.element.find(".btn-open").on("click",function(){GlobalAudio.play("button"),e()}),t(".quiz-content").on("QUIZ_CHECK_ANSWER_ALL",function(){e("hide")}),t(".quiz-content").on("QUIZ_SHOW_ANSWER",function(){e("hide")}),t(".quiz-content").on("QUIZ_RESET_ANSWER",function(){}),this.options.autoStart&&this.start()}function s(){i.call(this),this.context.clearRect(0,0,this.canvas.width(),this.canvas.height()),this.canvas.on(touchstart,t.proxy(o,this)),t(window).on(touchmove,t.proxy(a,this)),t(window).on(touchend,t.proxy(c,this)),this.element.on("pointerup",function(t){t.stopPropagation()}),t(window).on("resize",t.proxy(n,this)),n.call(this)}function n(e){this.resizeLeft=t(".content-container").offset().left,this.resizeTop=0,this.resizeScale=viewport.scale}function i(){var e=this;this.element.find(".color-btn").each(function(s){var n=t(this).css("background-color");t(this).data("color",n),t(this).css("background-color","transparent"),t(this).on(touchend,function(s){var n=t(this).index();e.setColor(n)})}),e.setColor(0),this.element.find(".remove-btn").on(touchend,function(s){e.element.find(".color-btn").removeClass("active"),t(this).addClass("active"),e.thickness=e.options.eraserThickness,e.context.globalCompositeOperation="destination-out"}),this.element.find(".reset-btn").on(touchend,function(t){e.context.clearRect(0,0,e.canvas.width(),e.canvas.height())}),this.element.find(".finish-btn").on(touchend,function(t){e.dispose(),e.element.removeClass("start").addClass("finish").trigger("quizClear")})}function o(t){this.element.hasClass("open")&&this.selectColor&&(this.startX=t.pageX-this.canvas.offset().left,this.startY=t.pageY-this.canvas.offset().top,t.originalEvent.changedTouches&&(this.startX=t.originalEvent.changedTouches[0].clientX-this.canvas.offset().left,this.startY=t.originalEvent.changedTouches[0].clientY-this.canvas.offset().top),this.startX=this.startX/this.resizeScale,this.startY=this.startY/this.resizeScale,this.context.lineWidth=this.thickness,this.context.lineJoin=this.context.lineCap="round",this.context.strokeStyle=this.selectColor,this.context.shadowColor=this.selectColor,this.context.moveTo(this.startX,this.startY),this.touchTarget=this.element)}function a(t){if(this.touchTarget){this.isDraw=!0;var e=t.pageX-this.canvas.offset().left,s=t.pageY-this.canvas.offset().top;t.originalEvent.changedTouches&&(e=t.originalEvent.changedTouches[0].clientX-this.canvas.offset().left,s=t.originalEvent.changedTouches[0].clientY-this.canvas.offset().top),e/=this.resizeScale,s/=this.resizeScale,this.context.lineTo(e,s),this.context.stroke(),t.preventDefault(),t.stopPropagation()}}function c(t){this.touchTarget=null,this.context.beginPath(),this.isDraw&&this.element.trigger("ON_DRAW"),this.isDraw=!1}var h;return Class.extend({init:function(s,n){this.element=s,this.options=n,h=this,this.element.append(t(drawingInner)),this.touchTarget=null,this.canvas=this.element.find("canvas"),this.context=this.canvas[0].getContext("2d"),this.startX=0,this.startY=0,this.selectColor="rgba(0, 0, 0)",this.clearAuido=null,this.thickness=this.options.thickness,this.isDraw=!1,this.resizeLeft=0,this.resizeTop=0,this.resizeScale=1,e.call(this)},start:function(){s.call(this)},setColor:function(t){this.element.find(".remove-btn").removeClass("active"),this.element.find(".color-btn").removeClass("active"),this.selectColor="rgba(0, 0, 0)",t>-1&&(this.thickness=this.options.thickness,this.element.find(".color-btn").eq(t).addClass("active"),this.selectColor=this.element.find(".color-btn").eq(t).data("color"),this.context.globalCompositeOperation="source-over")},dispose:function(){this.selectColor="rgba(0, 0, 0)",this.element.find(".color-btn").removeClass("active"),this.element.find(".color-btn").off("mouseup touchend"),this.element.find(".remove-btn").off("mouseup touchend"),this.element.find(".reset-btn").off("mouseup touchend"),this.element.find(".finish-btn").off("mouseup touchend"),this.canvas.off("mousedown touchstart"),t(window).off("mousemove touchmove mouseup touchend")},reset:function(){this.element.removeClass("open")}})}();s.DEFAULT={autoStart:!0,thickness:14,eraserThickness:30},window.DrawingTool=s,t.fn.drawingTool=e,t.fn.drawingTool.Constructor=s}(jQuery);var drawingInner='<div class="drawing-content">	<div class="canvas-cont">		<canvas class="canvas" width="1280" height="660"></canvas>	</div>	<div class="tool-container">		<div class="ico-info btn-open">			<span>그려 보세요</span>			<span class="ico-arr"></span>		</div>		<div class="tool-box">			<ul class="list">				<li class="btn- color-btn"></li>				<li class="btn- color-btn"></li>				<li class="btn- color-btn"></li>				<li class="btn- color-btn"></li>				<li class="btn- color-btn"></li>				<li class="btn- color-btn"></li>				<li class="btn- remove-btn"></li>				<li class="btn- reset-btn"></li>			</ul>		</div>	</div></div>';